{
    "content": "<?xml version=\"1.0\" encoding=\"UTF-8\"?><metadata><idinfo><citation><citeinfo><origin>Schweitzer, Peter N.</origin><pubdate>1995</pubdate><title>MP: A compiler for formal metadata</title><edition>2.9.30</edition><geoform>computer program</geoform><pubinfo><pubplace>Reston, Virginia</pubplace><publish>U.S. Geological Survey</publish></pubinfo><onlink>http://geology.usgs.gov/tools/metadata/</onlink></citeinfo></citation><descript><abstract>MP is a program for validating the syntactical structure offormal metadata, testing the structure against the ContentStandards for Digital Geospatial Metadata devised by theFederal Geographic Data Committee (FGDC).  MP is describedas a compiler because it contains not only a lexical parserbut also code to analyze the tree that the parser generates,and code to output the metadata in several different formats.It is written in Standard C (i.e. ANSI C) and runs on Linux,UNIX, and all versions of Microsoft Windows (95 and later,including XP). MP generates a textual report indicating errors in themetadata, primarily in the structure but also in the values ofsome of the scalar elements (i.e. those whose values arerestricted by the standard).  Output formats include text (thesame as the input format), Hypertext Markup Language (HTML),Standard Generalized Markup Language (SGML), Extensible MarkupLanguage (XML) and Directory Interchange Format (DIF). MP has the ability to recognize and process elements thatare not part of the FGDC standard, provided these elementsare properly described in a local file.</abstract><purpose>Throughout the 1980s and early 1990s, the improving capabilityof desktop computers to carry out complex analyses hasincreased the popularity of geographic information systems(GIS).  As they became familiar with GIS technology, people atall levels of government, in industry, and in academia havebeen calling for better access to publically-availablegeospatial information and more general use of standard termsof reference and of standard formats for the exchange ofgeospatial data and information. Answering this need is the goal of the National Spatial DataInfrastructure (NSDI), a government-wide coordination effortinitiated at the Federal level through Executive Order 12906,which was signed by President Clinton in April of 1994. A key component of NSDI is the development of a NationalGeospatial Data Clearinghouse, a general source of informationabout geospatial data that are available to the public.  Withthe Clearinghouse a user can determine whether geospatial dataon a region of interest exist and are appropriate for solvingthe problem at hand. The Clearinghouse is a distributed network of internet sitesproviding metadata (information about geospatial data) tousers in approximately the same way.  Its success depends onthe overall consistency of the metadata that are madeavailable, because users are expected to evaluate metadatafrom numerous sources in order to determine which data meettheir needs. To promote consistency in metadata, the Federal GeographicData Committee (FGDC), an interagency council charged withcoordinating the Federal implementation of NSDI, has producedthe Content Standards for Digital Geospatial Metadata(CSDGM).  That document provides standard terms describingelements common to most geospatial data, and encourages peoplewho document geospatial data sets to use these terms. The Content Standards for Digital Geospatial Metadata(hereafter referred to simply as \"the standard\") describes notonly the terms of reference but also specifies therelationships among those terms.  The relationships, many ofwhich are hierarchical, are complex and a formal syntax isprovided to specify them. Because the syntax of the standard is complex and the numberof descriptive elements is fairly large (341), creatingmetadata that conform to the standard is not an easy task.  Inaddition to the problem of assembling the information neededto properly describe the subject data sets, data producersmust arrange that information using the terms given in thestandard and arrange the terms using the syntactical rulesgiven in the standard.  The resulting metadata are formallystructured and use standard terms of reference, hence theterm \"formal metadata\" in the title of this report. It is important to be able to say with confidence thatmetadata conform to the structure of the standard.  Humanreview is still required--no software can determine whethermetadata are accurate--but human review of the content iseasier if the syntactical structure is determined to becorrect. Tools whose purpose is to facilitate the creation of metadatacannot generally be said to conform to the standard, sincethey typically allow, but do not encourage, the user to createincomplete metadata or to enter improper values.  Conformancetesting should be carried out on the output of metadatageneration tools rather than on the tools themselves.  MP isdesigned to carryout conformance testing on formal metadata ofthis type.</purpose><supplinf>1. Command line options MP is started by issuing a command to the operating system.Its behavior is controlled both by switches on the commandline and through a configuration file.  Command-line switchesare as follows: &gt; option      resulting action&gt; --------------------------------------------------------&gt; -l code     use language indicated by code (en,es,id,fr)&gt; -c cfile    obtain configuration information from cfile&gt; -e efile    direct syntax errors to efile&gt; -t tfile    create text output in tfile&gt; -h hfile    create html output in hfile&gt; -f ffile    create FAQ-style html in ffile&gt; -s sfile    create sgml output in sfile&gt; -d dfile    create DIF  output in dfile The name of the input file that contains formal metadatais given on the command line but is not preceded by aswitch.  The input file name must not begin with a hyphen. Example: &gt; mp -c config.dat foo -e foo.err -t foo.txt -h foo.html -f foo.faq.html -s foo.sgml -d foo.dif This command causes mp to read options from the fileconfig.dat and metadata from the file foo.  Errors aredirected to the file foo.err, and output is directed tothe following files:&gt; foo.txt      ASCII, using the input format&gt; foo.html     Hypertext Markup Language&gt; foo.faq.html FAQ-style Hypertext Markup Language&gt; foo.sgml     Standard Generalized Markup Language&gt; foo.xml      Extensible Markup Language&gt; foo.dif      Directory Interchange Format Names of output files may be omitted if the correspondinginformation is included in the configuration file, which isdescribed in section 3 below. Errors are printed to the error file or, ifnone was specified, to the standard error device (stderr),which is usually the console or the terminal from which theprogram was launched.  Error messages and warnings refer tothe line in the input metadata file by number (i.e.\"Error (line 1):\" refers to the first line in the input file).Warnings are issued when conditions that are consideredunusual are detected; errors indicate a condition that runscounter to the dictates of the FGDC standard. 2. Input file format Since the FGDC Content Standards for Digital GeospatialMetadata, as the name implies, specifies only the contents ofmetadata files and not their encoding, it is necessary tochoose or devise a specification for metadata encoding inorder to create formal metadata. The encoding format interpreted by this compiler is purelytextual.  It describes the hierarchical structure of themetadata using indentation, in which the members of compoundelements are indented more than their parent element and allof the elements at the same level in the hierarchy areindented alike.  The full hierarchy is specified, evenelements like Contact_Information that exist only to containother elements and would not normally be needed by a humanreader.  The format is designed to be both parseable and human-readable, with a minimum of unnecessary jargon and code, butthe requirement to be parseable makes it a lot more structuredthan ordinary text. Precise rules governing the format of the input file are asfollows: Terms: tab := ASCII 9 space := ASCII 32 element name := A sequence of bytes consisting of alphanumericcharacters, the underscore, hyphen, and forward slash.  Thissequence is one of the formal names given to metadata elementsin the standard. Examples: &gt;Citation&gt;Identification_Information&gt;Data_Set_G-Polygon_Outer_G-Ring&gt;Range_of_Dates/Times value := A text string associated with an element by theoriginator of the metadata. Arrangement: a. Metadata files are plain text without markup.  Non-ASCIIcharacter may be used and will be passed through to the outputfiles but in the HTML output these may be interpreted ashaving ISO-8859-1 encoding by subsequent software. b. The number of characters per line is not limited. c. Indentation is accomplished using tabs, spaces, or acombination of the two, but for purposes of determiningindentation level, one tab equals one space. d. Blank lines may occur anywhere in the file. e. Element names are spelled out in the metadata file exactly asin the syntax rules of the metadata content standard.  Where thedescriptive portion of the standard differs from thesyntactical rules, the syntactical rules are regarded asauthoritative, e.g. Attribute_Units_of_Measure is correct. f. A single colon or equal sign may follow each element namebut is not required. g. Whitespace may occur between element name and colon or equalsign, and may occur after the colon or equal sign. h. Values are associated with an element in one of three ways: (1) The value begins at the first nonblank following theelement name (or following colon or equal sign) and extends tothe end of the line. (2) The value begins on the line following the element name.It is indented more than the element name, i.e. there are morespaces or tabs preceding the value than precede the elementname. (3) The value begins on the line containing the element name.It extends onto subsequent lines, where it is indented morethan the element name, i.e. there are more spaces or tabspreceding the value on lines following the element name thanprecede the element name. i. Values of compound types occur on successive lines usingthe same degree of indentation. Example: &gt;  Citation_Information:&gt;    Originator:&gt;    Publication_Date:&gt;    Publication_Time:&gt;    Title:&gt;    Type_of_Map:&gt;    Serial_Information:&gt;      Serial_Name:&gt;      Issue_Identification:&gt;    Publication_Information:&gt;      Publication_Place:&gt;      Publisher:&gt;    Other_Citation_Details:&gt;    Online_Linkage:&gt;    Larger_Work_Citation: 3. Configuration file format Described in http://geology.usgs.gov/tools/metadata/tools/doc/config.html 4. Local extension file format The local extension file is encoded like the metadata;hierarchical structure is indicated using indentation. &gt;local:&gt;  name &lt;element name&gt;&gt;  sgml &lt;tag name&gt;&gt;  parent &lt;element name&gt;&gt;  child &lt;element name&gt; Compound types: &gt; local = name + (sgml) + 1{parent}n + 1{child}n Scalar types: name The name of the element as it will appear in the metadata.This must consist only of upper- and lower-case letters,numbers, and the underscore character. sgml The element tag to be used for output in SGML.  If omitted,the full name is used. parent The name of the element under which this element may appear.These names may be standard elements or local extensions. child The name of an element which may appear under this element.</supplinf></descript><timeperd><timeinfo><sngdate><caldate>1995</caldate></sngdate></timeinfo><current>initial release date; later revision is ongoing and continuous</current></timeperd><status><progress>Complete</progress><update>As needed</update></status><keywords><theme><themekt>None</themekt><themekey>FGDC</themekey><themekey>Metadata</themekey><themekey>Software</themekey></theme></keywords><accconst>none</accconst><useconst>none</useconst><ptcontac><cntinfo><cntperp><cntper>Peter N. Schweitzer</cntper></cntperp><cntaddr><addrtype>mailing address</addrtype><address>Mail Stop 954 National CenterU.S. Geological Survey12201 Sunrise Valley Drive</address><city>Reston</city><state>VA</state><postal>20192</postal><country>USA</country></cntaddr><cntvoice>(703) 648-6533</cntvoice><cntfax>(703) 648-6252</cntfax><cntemail>pschweitzer@usgs.gov</cntemail></cntinfo></ptcontac><browse><browsen>http://geo-nsdi.er.usgs.gov/mp.gif</browsen><browsed>Diagram showing the processing of a fairly complex metadata recordfrom the editing process (on the left) through formal parsing,syntactical analysis, and generation of human- and computer-readablereports (on the right). Boxes indicate files; their labels show theformat of those files. Arrows indicate the processing done byspecific computer programs.</browsed><browset>GIF</browset></browse><datacred>Spanish-language element names kindly provided by Dr. Ing. Carlos L\\ufffd\\ufffdpezof the Clearinghouse Nacional de Datos Geogr\\ufffd\\ufffdficos, Uruguay&lt;http://www.clearinghouse.gub.uy/&gt; Indonesian-language element names kindly provided by the IndonesianNational Coordination Agency for Surveys and Mapping BAKOSURTANAL French-language element names kindly provided by Environment Canada(John Cree) German-language element names kindly provided by Peter Korduan(University of Rostock) Portuguese-language element names kindly provided by Luis Cavalcanti (BahianaPesquisador em Informa\\ufffd\\ufffd\\ufffd\\ufffdes Geogr\\ufffd\\ufffdficas, IBGE- Coordena\\ufffd\\ufffd\\ufffd\\ufffdo de Geografia Brazil)</datacred><native>The software has been developed using UNIX systems of variousversions and suppliers.  Versions for Microsoft Windows havebeen compiled using GNU gcc that comes with the MinGW tools.</native><crossref><citeinfo><origin>Federal Geographic Data Committee</origin><pubdate>1994</pubdate><title>Content Standards for Digital Geospatial Metadata</title><onlink>&lt;http://geology.usgs.gov/tools/metadata/standard/metadata.html&gt;</onlink></citeinfo></crossref><crossref><citeinfo><origin>Federal Geographic Data Committee</origin><pubdate>1998</pubdate><title>Content Standard for Digital Geospatial Metadata</title><onlink>&lt;http://www.fgdc.gov/metadata/csdgm/&gt;</onlink></citeinfo></crossref></idinfo><dataqual><logic>Source code and make description files are included.  Wherediscrepancies exist between the syntactical and semanticdescriptions of elements in the Content Standards for DigitalGeospatial Metadata, the syntactical descriptions are regardedas authoritative.</logic><complete>The compiler embodies the syntax of the 1998 version ofthe Content Standard for Digital Geospatial Metadata, known asFGDC-STD-001-1998 and also supports the following formal profilesof that standard:&gt;Biological Data Profile   FGDC-STD-001.1-1999&gt;Shoreline Data Profile    FGDC-STD-001.2-2001&gt;Remote-sensing Extensions FGDC-STD-012-2002 In addition the following extension is included by default: &gt;Extension_Information:&gt;  Extended_Element_Name: Metadata_Language&gt;  Short_Name: metalang&gt;  Parent: Metadata_Reference_Information Local extensions to the standard are permitted and a mechanismis provided that allows these extensions to be described tothe compiler.</complete><lineage><srcinfo><srccite><citeinfo><origin>Federal Geographic Data Committee</origin><pubdate>19940608</pubdate><title>Content Standards for Digital Geospatial Metadata</title><onlink>http://www.fgdc.gov/</onlink></citeinfo></srccite><typesrc>paper and digital text</typesrc><srctime><timeinfo><sngdate><caldate>19940608</caldate></sngdate></timeinfo><srccurr>approval date</srccurr></srctime><srccitea>CSDGM</srccitea><srccontr>The element names, syntactical rules governing their use,and the domains and encoding of certain values are givenin this source.</srccontr></srcinfo><srcinfo><srccite><citeinfo><origin>Federal Geographic Data Committee</origin><pubdate>1998</pubdate><title>Content Standard for Digital Geospatial Metadata</title><onlink>http://www.fgdc.gov/metadata/csdgm/</onlink></citeinfo></srccite><typesrc>paper and digital text</typesrc><srctime><timeinfo><sngdate><caldate>1998</caldate></sngdate></timeinfo><srccurr>approval date</srccurr></srctime><srccitea>FGDC-STD-001-1998</srccitea><srccontr>A revision of the 1994 version of the metadata standard.Specifies modifications in the production rules and addsa few new elements.</srccontr></srcinfo><srcinfo><srccite><citeinfo><origin>Biological Data Working Group, FGDC</origin><origin>USGS Biological Resources Division</origin><pubdate>1999</pubdate><title>Content Standard for Digital Geospatial Metadata--Biological Data Profile, FGDC-STD-001.1-1999</title><pubinfo><pubplace>Washington, D.C.</pubplace><publish>Federal Geographic Data Committee</publish></pubinfo><onlink>http://www.fgdc.gov/standards/documents/standards/biodata/biodatap.html</onlink></citeinfo></srccite><typesrc>paper and digital text</typesrc><srctime><timeinfo><sngdate><caldate>1999</caldate></sngdate></timeinfo><srccurr>approval date</srccurr></srctime><srccitea>FGDC-STD-001.1-1999</srccitea><srccontr>A registered profile of the 1998 version of the metadatastandard.  Specifies modifications in the production rulesand adds new elements to improve consistency of documentationof biological data.</srccontr></srcinfo><procstep><procdesc>MP was used to process metadata for the opening of theUSGS node of NSDI.</procdesc><srcused>CSDGM</srcused><procdate>19950123</procdate></procstep><procstep><procdesc>Modified html.c to cope better with titles that span morethan one line.  The separate lines of the title areconcatenated for both the document title and the top-levelheading.</procdesc><procdate>19950222</procdate></procstep><procstep><procdesc>Modified html.c to always output two spaces after the&lt;/em&gt; tag in a keyword.</procdesc><procdate>19950223</procdate></procstep><procstep><procdesc>Modified sgml.c to use eight-character tags that aredifferent from the ASTM tags.  The ASTM tags cannot beused in sgml because many are ten characters long, andSGML names are restricted to eight characters. Created a new module astm.c containing the ASTM tags, Z39.50 numbers, and the code to go between those and FGDCkeywords.  This module is not currently linked into theexecutable.</procdesc><procdate>19950320</procdate></procstep><procstep><procdesc>Modified astm.c to include tags for map projection namestaken from Doug Nebert's DTD: &gt; ALBERSCEA&gt; AZIMUTHAL&gt; EQUIDISTC&gt; EQUIRECT&gt; GENERALVNP&gt; GNOMONIC&gt; LAMBERTAZ&gt; LAMBERTCC&gt; MERCATOR&gt; MILLER&gt; MODSALASKA&gt; OBMERCATOR&gt; ORTHO&gt; POLYCONIC&gt; PSTEREO&gt; ROBINSON&gt; SINUSOIDAL&gt; SPOBLMERC&gt; STEREO&gt; TM&gt; VANDERG Excised sgml tags from sgml.c; transferred the eight-character tags to a new file called ps8.c.  Choice of tagsto use in generating SGML output is governed by a localvariable called do_astm in sgml.c; currently this isalways set to 1, causing the astm tags to be used.</procdesc><procdate>19950403</procdate></procstep><procstep><procdesc>Modified syntax.c to issue warning rather than error whena scalar value is missing, and to include text of unknownkeywords in error messages.</procdesc><procdate>19950425</procdate></procstep><procstep><procdesc>Modified text.c to not output the error message about toomuch indentation.  The code already functions correctlyfor files that are indented consistently within sections.</procdesc><procdate>19950526</procdate></procstep><procstep><procdesc>Modified text.c to output a warning if the indentationis ambiguous, as in &gt;A:&gt;  B:&gt;      C:&gt;    D: Here the parser assumes that D is a member of A, not ofB.  But the user might have intended D to be a member ofB.  The parser cannot tell, so it issues a warning.</procdesc><procdate>19950526</procdate></procstep><procstep><procdesc>Modified mp.c to add functions for node handling:&gt; void deallocate_item (struct item *p);&gt; struct item *insert_item_after (struct item *r);&gt; struct item *insert_item_before (struct item *q);&gt; struct item *add_child (struct item *p);and added comments explaining these functions. Added code to main in mp.c to insert a parent Metadatanode if one is not already present.  This causes thesyntax checker to report missing major sections that arerequired.</procdesc><procdate>19950531</procdate></procstep><procstep><procdesc>Created module extend.c to handle lookup and translationof local element names (i.e. element names not part of theFGDC standard).  Modified keyword.c to allow the functionskey_of and text_of to return valid data when extensionsare given as their arguments.  Modified astm.c and ps8.cto report as the sgml tag of an extension the tag namereturned from text_of_extension() in extend.c.  This isnot entirely satisfactory, because extensions might bestructured like FGDC keywords, i.e. a long form fortextual reports and a short (8- or 10-character) tag namefor sgml.</procdesc><procdate>19950610</procdate></procstep><procstep><procdesc>Added functions in html.c to handle translation ofreserved characters in html output.  This converts&lt;URL:theURL&gt; in the input to&lt;a href=\"theURL\"&gt;&lt;tt&gt;&amp;lt;URL:theURL&amp;gt;&lt;/tt&gt;&lt;/a&gt;in the output, thus activating URLs embedded in themetadata.  It also converts other occurrences of &lt; and &gt;to &amp;lt; and &amp;gt; respectively.  This is not necessarilydesirable in all cases; there is an internal variablecalled do_text_translation that controls whether or notthis gets done.  If do_text_translation is set to 0,textual values are conveyed to the html file as theyappear in the input file.  If do_text_translation isnonzero, textual values are translated as described.</procdesc><procdate>19950622</procdate></procstep><procstep><procdesc>Added code to text.c, syntax.c, html.c, and sgml.c tohandle blank lines.  Modified item structure to include aprev pointer within compound types.</procdesc><procdate>19950623</procdate></procstep><procstep><procdesc>Modified html.c to correctly skip the Metadata tag at thetop of the tree.  Added code to correctly handleampersands and double-quotes.</procdesc><procdate>19950626</procdate></procstep><procstep><procdesc>Modified text.c to handle blank lines in a more logicaland comprehensive fashion.  Blank lines are now assignedindentation prior to the disruption of links that formsthe overall parse tree.  Indentation assigned to a blankline is the larger of the indentation of the previous non-blank element or the next non-blank element in the file.This ensures that blank lines will not have children (ifthey did, the children would not appear in the output) andonly occur as members of lists.</procdesc><procdate>19950626</procdate></procstep><procstep><procdesc>Created config.c and config.h to handle configurationissues through a configuration file, containing key wordsin the same general form of the metadata.  Modified mp.c,text.c, html.c, and sgml.c to consult the informationcontained in the config file.</procdesc><procdate>19950627</procdate></procstep><procstep><procdesc>Created local.c to replace extend.c for handling localextensions to the standard.  This module provides amechanism for user-specified element names, withcorresponding SGML tags, to be handled properly by theparser and by the code generators.  Syntax checking isrelatively primitive, and is based a parent list and childlist associated with each local element.  Essentially thismeans that local extensions are always optional andrepeatable and their children, if any, are always optionaland repeatable.</procdesc><procdate>19950630</procdate></procstep><procstep><procdesc>Modified sgml.c and html.c and config.c to allow users tospecify a string that will be output wherever blank linesoccur in the input file.  The default for SGML is \"\"; thedefault for HTML is \"&lt;P&gt;\\ \".  This option is specified byputting the keyword blanks under the keyword sgml or htmlunder output in the configuration file.</procdesc><procdate>19950630</procdate></procstep><procstep><procdesc>Modified ps8.c to reflect the following tag name changes:&gt; tempkeyt -&gt; tempkt&gt; accscons -&gt; accconst&gt; accsinst -&gt; accinstr&gt; columns  -&gt; colcount&gt; vertcnt  -&gt; vrtcountRebuilt makedtd and rebuilt ps8.dtd.</procdesc><procdate>19950711</procdate></procstep><procstep><procdesc>Modified config.c to allow the keyword skip_extensionsunder output:sgml.  Modified sgml.c to look for thiskeyword in the configuration info.  If present, thenelements that are not part of the 19940608 CSDGM willnot be included in the sgml output.</procdesc><procdate>19950714</procdate></procstep><procstep><procdesc>Modified sgml.c to make 8-character tags the default,as specified in the GEO attribute set for Z39.50.</procdesc><procdate>19950926</procdate></procstep><procstep><procdesc>Modified mp.c to remove the generic tree-handlingroutines to tree.c, which was added to the Makefiles.</procdesc><procdate>19951101</procdate></procstep><procstep><procdesc>Modified syntax.c to permit more than oneEntity_and_attribute_Overview in an Overview_Description.Thanks to Chuck Stein for pointing out this bug.</procdesc><procdate>19960201</procdate></procstep><procstep><procdesc>Modified config.c to correctly recognize the component \"top_level\"of \"text\"; this controls whether the top-level Metadata elementis preserved on output or omitted.</procdesc><procdate>19960215</procdate></procstep><procstep><procdesc>Modified html.c and config.c to allow new syntax for specifyingthe prefix and suffix tags of element names and element valuesin html.  The new syntax is &gt;output&gt;  html&gt;    element&gt;      name&gt;        prefix &lt;html code&gt;&gt;        suffix &lt;html code&gt;&gt;      value&gt;        prefix &lt;html code&gt;&gt;        suffix &lt;html code&gt; This allows specific html code to precede and follow both theelement name and the element value.  Created a new file calleddeluxe.cfg in doc that shows how this new syntax can be usedto link every element name back to the correct section of myhypertext rendition of the standard.</procdesc><procdate>19960328</procdate></procstep><procstep><procdesc>Modified astm.c to remove the information about z39.50 numbers.Added the module z3950.c to carry this information appropriately,and modified local.c to allow users to include in the descriptionof extensions a characteristic z3950 whose value is the numerictag assigned to the element.</procdesc><procdate>19960405</procdate></procstep><procstep><procdesc>Modified html.c to fix bug in which default prefix for elementnames was taken to be \"prefix\", and default suffix \"suffix\".Thanks to Hugh Phillips for pointing this out.</procdesc><procdate>19960521</procdate></procstep><procstep><procdesc>When a line in a text value was indented relative to those preceding it,the line was correctly recognized by the parser as being a part of thetextual value.  But when such an indented line immediately followed ablank line, the indented line was considered a sibling of the blank anda child of the preceding text line.  This caused the line to be omittedfrom the output.  Not good.  The fix is to modify check_unknown insyntax.c so that this case is recognized and the topology is rearrangedto fit the situation. I'm not sure whether this is the right place to fix this problem.  I thinkwe could also fix it in the parser, by assigning the indent value of linesthat follow blanks differently if the preceding nonblank line has keyWunknown.  This would require more sophisticated look-back at that pointin the parser, however, and I don't know whether it would correctlyhandle more complicated situations.</procdesc><procdate>19960623</procdate></procstep><procstep><procdesc>The code described in the previous process step has been excised.  Instead,the function equalize_indented_scalars was added to try to fix up textualvalues that have indentation.  The basic problem is that you don't wantblank lines to be parents of text values, nor for that matter do you wanttext values to be parents of text values.  This code is not comprehensive,and probably needs more work.</procdesc><procdate>19960629</procdate></procstep><procstep><procdesc>Modified main() in xtme.c, mp.c, and cns.c to read more than onelocal extensions file.  This should enable people to choose morecarefully which extensions will apply to a given input file.</procdesc><procdate>19960705</procdate></procstep><procstep><procdesc>Modified equalize_indented_scalars() in text.c to avoid writinginto p-&gt;next-&gt;prev when p-&gt;next is NULL.  Modified sgml.c toavoid warning on some systems casting char * to unsigned char *.</procdesc><procdate>19960719</procdate></procstep><procstep><procdesc>Modified all source files containing #ifdef's so that these preprocessordirectives occur only at the beginnings of lines, to work with non-standardcompilers such as the one supplied with OSF/1.  The ANSI standard came outin 1987.  Haven't these vendors *read* that document by now?</procdesc><procdate>19960806</procdate></procstep><procstep><procdesc>Modified html.c to remove the default formatting of elements.  Theseshould be controlled by a configuration file.  Also modified this fileso that it correctly recognizes when no value is given as the defaultprefix or suffix of element names.</procdesc><procdate>19960806</procdate></procstep><procstep><procdesc>Modified config.c to recognize and html.c to use the configurationelement output:html:element:value:obeylines which, when present,causes html.c to append a line break &lt;br&gt; to each line of the valueof the specified element.</procdesc><procdate>19960806</procdate></procstep><procstep><procdesc>Modified text.c to output {single scalar followed by blank} the sameway as {single scalar}; immediately following the element name.Modified syntax.c to strip enveloping quotes from scalars that haverestricted domains.</procdesc><procdate>19960809</procdate></procstep><procstep><procdesc>Modified syntax.c to limit the number of Enumerated_Domain to one perAttribute_Domain_Values.  This bug spotted by Gerry Daumiller.</procdesc><procdate>19960826</procdate></procstep><procstep><procdesc>Modified syntax.c to not test blank lines in scalar values.</procdesc><procdate>19960906</procdate></procstep><procstep><procdesc>Modified sgml.c to include a rudimentary SGML parser.  It hasessentially no flexibility and no error recovery. Modified mp.c to use this SGML parser if the input file's nameends with .sgml or .sgm (case not sensitive).</procdesc><procdate>19960907</procdate></procstep><procstep><procdesc>Modified sgml.c to swat bug.  If a configuration file was used andthe output:sgml:blanks was also used, a seg fault could occur.</procdesc><procdate>19960918</procdate></procstep><procstep><procdesc>Modified config.c to recognize options output:html:header and footer.Modified html.c to output text of header before the title in the bodyof the html, and to output text of footer after the \"generated by mp\"line at the end of the html.</procdesc><procdate>19960926</procdate></procstep><procstep><procdesc>Modified dif.c to output a newline where Wblank appears in the parse treerather than \"(blank):\"</procdesc><procdate>19960927</procdate></procstep><procstep><procdesc>Modified syntax.c to classify errors and maintain counts of six differentkinds of errors: unrecognized elements, misplaced elements, missingelements, superfluous elements, empty elements, and elements with thewrong sort of values.  Modified mp.c to write a one-line report to stderrshowing the number of each type of error. Fixed a bug in syntax.c that caused the less-than-intuitive error message\"(unknown) is not permitted in &lt;element&gt;\".  The new text is more informative.</procdesc><procdate>19960930</procdate></procstep><procstep><procdesc>Modified config.c to fix bug in unify_strings() where allocated block dstwas not initialized before a call to strcat (crashed on Linux). Modified sgml.c to output Eric's suggested public identifier for DTD 1.0.</procdesc><procdate>19961017</procdate></procstep><procstep><procdesc>Modified config.c to understand element 'body' in output:html; thetext given for 'body' will be appended to the &lt;body&gt; tag in the htmloutput, allowing the user to specify background color for the html.</procdesc><procdate>19961028</procdate></procstep><procstep><procdesc>Modified keyword.h to define the values of enum fgdc_keyword, so thatbinary files will have more of a chance at portability.  Modifiedconfig.c to recognize the element \"binary\" in the config file.  Modifiedmp.c to read and write binary files on request.  Added module binary.cto carry out encoding and decoding of binary files.</procdesc><procdate>19970108</procdate></procstep><procstep><procdesc>Modified decode_tree() in text.c to allow scalar elements to beginon the line that contains the element name.</procdesc><procdate>19970130</procdate></procstep><procstep><procdesc>Modified write_contact_info() in dif.c to use more stack space forlname, mname, and fname (was 32 bytes in each case).</procdesc><procdate>19970317</procdate></procstep><procstep><procdesc>Modified write_html() in html.c to allocate more scratch space forthe title.  This caused rare crashes that could not be easilyanticipated or duplicated because they depended on the granularityof heap space, on the number of lines in the title, and on thelengths of the title lines.</procdesc><procdate>19970401</procdate></procstep><procstep><procdesc>Modified parse_sgml() in sgml.c to not aggregate lines in the input.Modified write_html_item() in html.c to use &lt;dd&gt; for single-itemdata values of length 64 or greater.  Previously these would beput into the &lt;dd&gt; tag.  Modified translate() in html.c to use amanaged dynamic buffer rather than a static array.</procdesc><procdate>19970507</procdate></procstep><procstep><procdesc>Modified parse_sgml() in sgml.c to fix bug in which unrecognized SGMLtags were not processed properly.  Changed parse_sgml() to permitexecution to proceed when unrecognized tags occur.  Added code todecode ISO 8859-1 entities in incoming SGML text.</procdesc><procdate>19970519</procdate></procstep><procstep><procdesc>Modified print_item() in tree.c to fix bug--was missing the variableto be printed in one of the printf calls.</procdesc><procdate>19970610</procdate></procstep><procstep><procdesc>Modified parse_sgml() in sgml.c to not output the warning aboutextraneous text if the extra text is entirely composed of whitespace.</procdesc><procdate>19970708</procdate></procstep><procstep><procdesc>If you specified the html prefix or suffix for an element value butnot for the element name, it didn't use the default element nameprefix and suffix, it used nothing.  In this change html.c was modifiedto use the default name prefix or suffix if the output:html:element:name:prefix or :suffix are not specified.  If ...:name:prefix is specifiedbut is blank, then the default name prefix is not used.  This allowsyou to specify that no prefix be used even if there is a default prefix(same for suffix).</procdesc><procdate>19970821</procdate></procstep><procstep><procdesc>Modified keyword.c, config.c, and local.c to avoid overflowing thelocal variable string when trying to recognize an element name.</procdesc><procdate>19970912</procdate></procstep><procstep><procdesc>Modified config.c to recognize preformat and meta elements underoutput:html.  preformat causes &lt;pre&gt; tags to enclose sections oftextual values whose lines all begin with &gt;.  To use a differentcharacter, give it as the value of preformat.  It is on by default,so specify \"preformat off\" to disable this feature.  meta enables thegeneration of dublin-core meta elements in html output.  It ison by default.  To disable dublin-core metadata, use \"meta off\".</procdesc><procdate>19971031</procdate></procstep><procstep><procdesc>Modified write_html_item() in html.c to simplify code and properlypreformat all sections preceded by &gt;.</procdesc><procdate>19971106</procdate></procstep><procstep><procdesc>Modified write_html_item() in html.c to not display the preformatindicator character in preformatted sections.</procdesc><procdate>19971112</procdate></procstep><procstep><procdesc>Modified key_of_ps8_tag() in ps8.c and key_of_astm_tag() in astm.c tocall a new function extension_of_sgml() in local.c that returns thekey of a local extension.  This causes mp and stomp to recognizeextensions in sgml input as well as in text input, using the samemechanism.  Thanks to Lisa Peoples for helping to find this bug.</procdesc><procdate>19980114</procdate></procstep><procstep><procdesc>Modified html.c to translate bare URLs into live links.  This recognizesftp://url and http://url as forms of urls as well as the older format&lt;URL:theURL&gt;.  Note that &lt;http://theURL&gt; will now become live as well.</procdesc><procdate>19980217</procdate></procstep><procstep><procdesc>Fixed minor bug in text.c.  If a textual value began on the same line asthe element name but that line was followed by a blank, it always discardedthe text following the element name.  Workaround was to close up theblank line.  It now looks foward in the list of elements to the nextnon-blank element; if that is Wunknown or EOF, the text following theelement name is retained as part of the value of the element.  If thenext non-blank line is a recognized element, the text following theoriginal element name is discarded with a warning.</procdesc><procdate>19980220</procdate></procstep><procstep><procdesc>Reordered the Process_Step elements in this document to be monotonicwith time.</procdesc><procdate>19980225</procdate></procstep><procstep><procdesc>Modified html.c to fix bug (found by Susan Stitt) in which the order ofoptions under output:html was significant (the first of {preformat, meta,translate} was interpreted properly, the others ignored).</procdesc><procdate>19980311</procdate></procstep><procstep><procdesc>Modified dif.c to conform to version 6 (19980202) of the DirectoryInterchange Format.  Thanks to Lynn Halpern (STX) for prompting andassisting in this upgrade.</procdesc><procdate>19980316</procdate></procstep><procstep><procdesc>Modified write_html() in html.c to place the name tag around onlythe &lt;hr&gt; at the top of each major section.  The concern was thatpoor parsers of HTML might not properly match the &lt;/A&gt; with themost recent &lt;A ...&gt; tag, which would result in an error where linksappear within major sections.  Thanks to Curtis Price of USGS WRD forpointing this out.</procdesc><procdate>19980501</procdate></procstep><procstep><procdesc>Modified several points within dif.c to fix bugs that caused it to crashwhen generating dif records for the examples.</procdesc><procdate>19980624</procdate></procstep><procstep><procdesc>Modified syntax.c to use CSDGM version 2.  Added upgrade() in upgrade.c toautomatically restructure those portions of the metadata that need to changeto fit version 2.  Added version strings in revision.c, declared inrevision.h.  Set version number to 2.0 for mp, cns, xtme, tkme, and stomp.</procdesc><srcused>FGDC-STD-001-1998</srcused><procdate>19980826</procdate></procstep><procstep><procdesc>Modified text.c to test whether top_level has an argument rather thansimply to use the value in a stricmp, which caused core dump when thevalue was not present.  Thanks to John Heuer for pointing this out.</procdesc><procdate>19980909</procdate></procstep><procstep><procdesc>Renamed metadata.dtd as csdgm1.dtd, copied into file csdgm2.dtd.  Modifiedcsdgm2.dtd to reflect syntactical structure of version 2 of the CSDGM.Added a file \"catalog\" to relate public identifiers to the SGML filesincluded with the software, tested with nsgmls on one metadata record.Updated sgml.c to produce a DOCTYPE that refers to the version 2 DTD.</procdesc><procdate>19980917</procdate></procstep><procstep><procdesc>Modified upgrade.c to print out slightly more verbose informationalmessages when adding elements to upgrade the metadata to CSDGM v2.</procdesc><procdate>19980928</procdate></procstep><procstep><procdesc>Created xml.c from sgml.c; modified mp.c to read and write XMLusing code in xml.c.</procdesc><procdate>19980928</procdate></procstep><procstep><procdesc>Modified sgml.c and xml.c to print newlines for blanks within textvalues by default, but only when the blank lines occur within thebody of the text value, not when they occur at the end of the value,and not when a blank line occurs between elements.</procdesc><procdate>19980929</procdate></procstep><procstep><procdesc>Modified syntax.c to correctly flag errors in Multiple Dates/Times(was looking at number of Calendar_Date within this element ratherthan number of Single_Date/Time within this element).  Thanks toKerie Hitt for pointing this out.</procdesc><procdate>19980930</procdate></procstep><procstep><procdesc>Modified mp.c and cns.c to not assign variable \"out\" to stderr untilruntime; in cygwin32 stderr is not a constant.</procdesc><procdate>19981019</procdate></procstep><procstep><procdesc>Modified syntax.c to fix bug in code that reports errors in compositionof Digital_Transfer_Option.  Thanks to Kerie Hitt and Curtis Price forfinding this bug.</procdesc><procdate>19981020</procdate></procstep><procstep><procdesc>Modified find_key() in tree.c to search only the given node and itschildren, not its siblings.</procdesc><procdate>19981027</procdate></procstep><procstep><procdesc>Created a new module fixdoc.c designed specifically to fix some specificproblems created by DOCUMENT.  Used in conjunction with a set of localextensions, assuming also that cns has been run on the output of DOCUMENTFILE using the same local extensions (and some aliases).  This is a fairlycomplicated procedure but one that I hope will save people from a lot ofaggravation as they try to recover the information they entered usingDOCUMENT.</procdesc><procdate>19981027</procdate></procstep><procstep><procdesc>Modified local.c to properly handle cases where more than 64 extensionsare added (bug fix--thanks to Matthew Skala for finding this).  This bugaffected mp, cns, xtme, and tkme, so I have incremented the versions ofall of these to 2.3.</procdesc><procdate>19981119</procdate></procstep><procstep><procdesc>Modified syntax.c to allow free text in Address_Type as per CSDGM v2.Thanks to Matthew Skala for pointing this problem out.</procdesc><procdate>19981121</procdate></procstep><procstep><procdesc>Modified upgrade() in upgrade.c to avoid following bad pointers whendecoding G-Ring polygon data.  This bug arose when users ran mp onthe template, which has no data.</procdesc><procdate>19981124</procdate></procstep><procstep><procdesc>Modified config.c to include option \"prune\" within \"input\".  This causesmp to prune the whole tree after fixdoc and upgrade.  Not that anyoneshould do prune in combination with fixdoc, but that's where it is inthe code.  Default is not to prune.</procdesc><procdate>19981130</procdate></procstep><procstep><procdesc>Modified mp.c to strip common extensions off the input file name whencomposing output file names from templates specified in the configfile.  This means that if you specified in your config file: &gt;output&gt;  errors %s.err&gt;  html&gt;    file %s.html and process the input file \"stuff.txt\", the errors will be put intoa file called \"stuff.err\" and the html output will be put into afile called \"stuff.html\".  The file option can be specified forhtml, sgml, xml, text, and dif output, and has the same effect ineach case. The extensions that will be stripped from the input file name arecurrently only the following, upper or lower case: &gt;.txt&gt;.sgml&gt;.sgm&gt;.xml&gt;.text&gt;.met&gt;.bin</procdesc><procdate>19981207</procdate></procstep><procstep><procdesc>Modified config.c to recognize the keyword \"ext\" under \"input\".  Thatelement, which may be repeated, is used to indicate the file extensionused for the input metadata file.  This allows the user to expand theset of file extensions beyond the default set mentioned in the previousprocess step.</procdesc><procdate>19981208</procdate></procstep><procstep><procdesc>Modified translated() in html.c to recognize a right parenthesis as theend of a URL.</procdesc><procdate>19981210</procdate></procstep><procstep><procdesc>Modified xml.c to output the entire XML declaration in lower case.Thanks to Joel Register for suggesting this.</procdesc><procdate>19981214</procdate></procstep><procstep><procdesc>Modified html.c to add a new function write_html_faq(), which like thefunction write_html(), writes an HTML output file.  The \"faq\" versioncasts the metadata in the form of a FAQ list. FAQ here stands forFrequently Anticipated Questions rather than Frequently Asked Questions,since we have no way to know whether anybody will actually ask thesequestions, but at least we think we can answer them! ;-)At this writing (19990217) it works on all the examples but doesn'thandle more than a few of the questions, and so leaves out quite a bitof the metadata.  Expect changes soon.</procdesc><procdate>19990217</procdate></procstep><procstep><procdesc>Modified sgml.c to recognize the entity \"&amp;break;\" while parsing sgml.When it finds this entity, it will add a Wblank element after thetext in which the entity was found is converted into a Wunknown.  Soif the line contains nothing beyond the \"&amp;break;\", the Wblank willbe inserted where the \"&amp;break;\" is.  If any text follows the \"&amp;break;\"on the same line, the Wblank will be inserted after that text. This allows people who are using sgml as input to specify where blanklines should occur within text values, since in sgml blank lines arenormally ignored.</procdesc><procdate>19990225</procdate></procstep><procstep><procdesc>Completed function write_html_faq() in html.c to generate plain-languageoutput in HTML format.  This output format will likely be refined in thenear future, but the basic idea is to write the metadata into an HTMLfile according to a series of plain-language questions.</procdesc><procdate>19990303</procdate></procstep><procstep><procdesc>Modified html.c to correct a brace nesting problem near line 1879.</procdesc><procdate>19990308</procdate></procstep><procstep><procdesc>Fixed minor bug in write_html_faq() in which the internal links to labelshow.1 and how.2 were not coded with the #, making them external instead.</procdesc><procdate>19990316</procdate></procstep><procstep><procdesc>Modified write_html_faq() to output the Format_Information_Content usingwrite_html_value() rather than simply munge().  Modified write_citation()to include the Online_Linkages, if present, in an unordered list.</procdesc><procdate>19990316</procdate></procstep><procstep><procdesc>Modified many of the C source files so that they do not explicitlydeclare the functions stricmp and memicmp, but instead include a newheader file stricmp.h that declares these functions.  The header filestricmp.h wraps the declarations in conditional code.  If the systemon which you want to compile already has the function stricmp, forexample, then define the symbol HAVE_STRICMP in the CFLAGS of themakefile.  Likewise if your system already has memicmp, defineHAVE_MEMICMP. Also I modified the declaration of memicmp to match that given in themingw32 headers; specifically I made its pointer arguments to be oftype const void * and its integer argument to be size_t instead. This was all motivated by my discovery that I could compile usingthe cygwin tools on Windows NT but specify -mno_cygwin and therebynot need to pack the cygwin1.dll into the distribution.</procdesc><procdate>19990329</procdate></procstep><procstep><procdesc>Modified upgrade.c so that when it changes the valueof Metadata_Standard_Version to FGDC-STD-001-1998, it also deletesany additional children of Metadata_Standard_Version.  This occurredwhen people had multiline responses for Metadata_Standard_Version,which is caused by wrapping the element's text to the next line.Thanks to Susan Stitt for pointing this out.</procdesc><procdate>19990401</procdate></procstep><procstep><procdesc>Modified translate() in html.c to encode high-bit characters usingthe long names (for example &amp;eacute; rather than the character 0xE9.Added a META tag at the beginning of the HEAD element to specifyencoding using ISO-8859-1.  I know these two actions are probablycontradictory, but maybe it won't hurt, and anyway we can alwaysundo the first change and stick the character codes in as is.</procdesc><procdate>19990401</procdate></procstep><procstep><procdesc>Modified parse_name in html.c to cancel the parse if the first nameis the string \"U.S.\" Modified some of the questions output in FAQ-style HTML for clarity.</procdesc><procdate>19990402</procdate></procstep><procstep><procdesc>Modified write_faq_html() in html.c to handle the various ways in whichan attribute's Enumerated_Domain elements may be nested within itsAttribute_Domain_Values elements.  The new method puts them all intoa single table (one per attribute).  Each Range_Domain, Codeset_Domain,or Unrepresentable_Domain gets its own table.</procdesc><procdate>19990402</procdate></procstep><procstep><procdesc>Modified write_html_faq() in html.c to print Non-digital_Form infowhen that is part of the Standard_Order_Process.  Modified thequestion for which Logical_Consistency_Report is the answer tomake it more compatible with topological information.  Modifiedmain() in mp.c to remember the names of the output files.  Eachoutput file is stored along with its type in a private structure.Modified html.c to output below the data set title a line indicatingthe other formats in which the metadata are available.  Modifiedwrite_html_faq() in html.c to output dates in a friendlier formatif it is possible to do so.</procdesc><procdate>19990405</procdate></procstep><procstep><procdesc>Modified config.c to accept keyword dif under output.  This was a longstanding oversight.  Modified config.c to accept keyword base underoutput:html.  The value given to this is a URL that will be put intoa &lt;base href=\"url\"&gt; tag near the top of the head element in html output.This causes relative links to work when the html document is retrievedthrough the clearinghouse (otherwise those links are relative to theclearinghouse gateway, usually not what you want).  Modified the linksto alternative formats given in the html files; these should now work asintended.</procdesc><procdate>19990406</procdate></procstep><procstep><procdesc>Modified html.c to include the output file name in the BASE HREF.</procdesc><procdate>19990407</procdate></procstep><procstep><procdesc>Fixed several missing-brace errors in write_html_faq() and write_dif().These caused seg faults when running the template, because the templatehas no actual data.</procdesc><procdate>19990414</procdate></procstep><procstep><procdesc>Modified upgrade.c to account for the possibility that someone mighthave more than one SDTS_Terms_Description, and within each, more thanone SDTS_Point_and_Vector_Information.</procdesc><procdate>19990420</procdate></procstep><procstep><procdesc>Modified text.c to make some static procedures public.  This enablesDoug Bakewell's MetaMerge program to be more easily compiled with thedistributed source code of mp.</procdesc><procdate>19990427</procdate></procstep><procstep><procdesc>Modified write_date() in html.c to output date as is whenever thefirst character of the value is not a digit.  Modified parse_name()in html.c to output the name as is when the first character is '&lt;'.These changes made it possible to run a modified template throughmp to show how the elements are used to compose the FAQ-style output.</procdesc><procdate>19990427</procdate></procstep><procstep><procdesc>Modified write_date() in html.c to correctly output dates where onlythe year is specified.</procdesc><procdate>19990430</procdate></procstep><procstep><procdesc>Modified a variety of routines to remove unused variables and avoidpotential use of uninitialized variables pointed out by gcc -Wall.</procdesc><procdate>19990430</procdate></procstep><procstep><procdesc>Modified xml.c to include an EncodingDecl in the XML declaration.Modified entities.c to supply a numeric version of ISO-8859-1character encodings, so that it will be possible to automaticallyoutput &amp;#160; instead of &amp;nbsp; in xml output.</procdesc><procdate>19990506</procdate></procstep><procstep><procdesc>Modified translate() in html.c to recognize \"mailto:address\" and processit the same way as it does \"http://\" and \"ftp://\", making the link alive hypertext link. (2.4.11)</procdesc><procdate>19990524</procdate></procstep><procstep><procdesc>Modified write_text() and write_text_item() in text.c to output anelement prefix if one is specified in the config file.  So if theconfig file contains output:text:prefix, then its contents will beoutput immediately preceding every element name in the text output.This would be helpful if a user wanted to allow an unsophisticatedperson edit the text file before re-processing with mp.  The trickis that if you put a strange prefix like @@ before each element name,then you can run cns on the edited file, and this makes it easier forcns to distinguish an element name from a text value that starts withone of the element names. (2.4.12)</procdesc><procdate>19990527</procdate></procstep><procstep><procdesc>Modified xml.c to output the elements in the order given in actions.cThis is necessary because although mp does not require elements toappear in any order, the XML DTD does.  Of course it does this onlybecause XML makes it needlessly difficult to specify a content modelin which the order of elements is not significant but the elementsthemselves are. (2.4.13)</procdesc><procdate>19990528</procdate></procstep><procstep><procdesc>Modified config.c so that find_option() looks only at and below thenode given as the first argument.  This also required adding anoverarching root node to the config tree so that find_option (NULL,key)would find things in the output subtree if the input subtree werepresent. (2.4.13)</procdesc><procdate>19990528</procdate></procstep><procstep><procdesc>Modified write_html_faq() in html.c to distinguish non-digital forma little more clearly.  Removed the &lt;hr&gt; between Standard_Order_Processes.Fixed bug in output of Range_of_Dates/Times within Time_Period_of_Contentin which write_html_item(q) was being called for each child of q, whereit should have been called as write_html_item(r) where r loops throughthe children of q.  Fixed a nearby bug where Ending_Date was being writtenwith the prefix \"Beginning_Date\".  (2.4.14)</procdesc><procdate>19990618</procdate></procstep><procstep><procdesc>Modified parse_sgml() in sgml.c so that if a blank line is encounteredin the middle of a text value, a blank element is added to the parsetree at that point.  (2.4.15)</procdesc><procdate>19990621</procdate></procstep><procstep><procdesc>Modified parse_xml() in xml.c to do the same thing as the previouschange did to parse_sgml(); when a blank line is encountered in themiddle of a text value, insert a Wblank into the parse tree. (2.4.16)</procdesc><procdate>19990622</procdate></procstep><procstep><procdesc>Modified xml.c to read and store attributes of XML elements read asXML.  The primitive XML parser here still doesn't allow an element,including its attributes, to span multiple lines.  This means thatan element's start tag cannot begin on one line and end on another.This is not a severe limitation if attributes are not used.  However,if attributes are allowed, this could easily become intolerable.(2.4.17)</procdesc><procdate>19990623</procdate></procstep><procstep><procdesc>Modified write_xml_item() in xml.c to fix bug in element-ordering codewhere one of the grandchildren of an element could be output beforeits children.  There may have been only one place this could occur, inTime_Period_Information where a Multiple_Dates/Times was used. (2.4.18)</procdesc><procdate>19990707</procdate></procstep><procstep><procdesc>Modified write_citation() in html.c to output a colon following thetitle only if there is either a Series_Information or aPublication_Information.</procdesc><procdate>19990708</procdate></procstep><procstep><procdesc>Modified upgrade() in upgrade.c to fix bug in which the first Distributorwas identified as being the first child of Distribution_Information.That isn't true if there's a blank line between them.  So mp was creatingan additional Distribution_Information for the first Distributor.  Thanksto Scott Barnwell for pointing this out.  (2.4.19)</procdesc><procdate>19990709</procdate></procstep><procstep><procdesc>Modified parse_name() and write_date() in html.c to better handlecases in which (a) an ancestral suffix follows the name and (b)the year is followed by non-numeric characters. (2.4.20)</procdesc><procdate>19990712</procdate></procstep><procstep><procdesc>Modified html.c to encapsulate the code that creates links to relatedfiles in a separate static procedure write_links().  This procedurelooks at the configuration for a section \"output:html:link\".  Withinthat section, if there are any of the elements link_faq, link_html,link_text, link_sgml, link_xml, or link_dif, then a link line iswritten to the output HTML file.  For each link_type element, if avalue is given it is taken as the URL for the link to the related file,with %s in the value being substituted for the name of the input file,not including its extension or its path. Modified check_extension() in syntax.c to provide the same slightlymore informative error messages as allow() does when an element isunrecognized. (2.4.21)</procdesc><procdate>19990714</procdate></procstep><procstep><procdesc>Modified write_links() in html.c to output the link even if therelated file isn't generated when a value is specified for theelements link_faq, link_html, etc. Modified upgrade() in upgrade.c to fix a bug introduced recentlywhen I changed it to properly handle multiple Distributors withina Distribution_Information.  (2.4.22)</procdesc><procdate>19990715</procdate></procstep><procstep><procdesc>Modified xml.c to parse the whole XML input file at once rather thanone line at a time.  This permits start-tags that have attributes tospan multiple lines in the input file.  Note that the parser codestill assumes that the input data are ISO-8859-1; this is not goodbecause XML uses UTF-8 by default. Modified config.c to parse the config file using copies of the functionsthat are used in text.c, illustrating the potential benefits of C++.(2.4.23)</procdesc><procdate>19990723</procdate></procstep><procstep><procdesc>Modified decode_xml() in xml.c to free space allocated for the text;that was temporarily used by the parser but wasn't returned to thesystem.</procdesc><procdate>19990727</procdate></procstep><procstep><procdesc>Modified write_links() in html.c to better handle the case in whichthe input metadata are in directories other than the one from whichmp is run.  It was implicitly duplicating part of the file path,because the HREF given in the BASE tag contained some of the pathelements also present in the value returned from related_file().The problem shows up only if you specify a BASE tag in output:htmland you don't specify a value for link_faq, link_html, link_xml, etc.The current code still won't work well if you specify a BASE tag butyou try to put the various output files in directories other than theone that contains the input file.  If you want to put alternativeoutput formats in different directories, you must use the configoptions link_faq, link_html, link_xml, etc.  (2.4.24)</procdesc><procdate>19990802</procdate></procstep><procstep><procdesc>Modified html.c to write the lead text in the links line as\"Metadata also available as\" rather than \"Available as\" andto not output a link to the current file.  (2.4.25)</procdesc><procdate>19990819</procdate></procstep><procstep><procdesc>Modified write_date() in html.c to correctly handle cases wherea month is given but not a day in an ISO 8601 date. (2.4.26)</procdesc><procdate>19990823</procdate></procstep><procstep><procdesc>Modified write_links() in html.c to look for an element called \"text\"within output:html:link in the configuration.  If there is one, thevalue given to text, if present, becomes the lead text in the linecontaining links to the other formats.  The default value of this textis \"Metadata also available as\".  (2.4.27)</procdesc><procdate>19990826</procdate></procstep><procstep><procdesc>Modified local.c to add a new function extension_is_compound() thatreturns 1 if the integer given as the argument is the key value ofa compound element, 0 otherwise.  The simplest way to do this was toadd a member to the internal extension_list structure.  That memberis an integer 0 or 1 that gets set to 0 by default and then gets setto 1 when a child element is recognized. Modified check_extension() in syntax.c to properly handle elementnames at the beginning of a line of text in the text of an extension.Previously it marked these as errors and threw away the text followingthe element name.  (2.4.28)</procdesc><procdate>19990827</procdate></procstep><procstep><procdesc>Modified parts.ext and parts2.ext so that a Data_Set_Part can haveother Data_Set_Part elements within it; this allows data setstructure to be described hierarchically.  Modified write_html_faq()in html.c to handle this hierarchical structure. (2.4.28)</procdesc><procdate>19990827</procdate></procstep><procstep><procdesc>Modified check_scalar_children() of syntax.c to clarify (?) the famous\"reclassified as text\" message.  (2.4.29)</procdesc><procdate>19990830</procdate></procstep><procstep><procdesc>Modified check_extension() in syntax.c to improve the error messagegenerated when an element name is encountered at the beginning ofa line of text in another element's value.  (2.4.30)</procdesc><procdate>19990909</procdate></procstep><procstep><procdesc>Modified write_html_faq() in html.c to output additional informationif some of the biological profile elements are present.  (2.4.31)</procdesc><procdate>19990913</procdate></procstep><procstep><procdesc>Modified decode_tree() in text.c to generate an additional hintto check the indentation when extraneous text is discarded. (2.4.32)</procdesc><procdate>19990915</procdate></procstep><procstep><procdesc>Modified mp.c to remove the code that replaces whitespace inoutput file names with underscores when running under MS Windows(as determined by defined symbol _WIN32).  Created Makefile.vcfor compiling mp and cns with Visual C++.  (2.4.33)</procdesc><procdate>19991007</procdate></procstep><procstep><procdesc>Modified html.c to insert &lt;/dt&gt; and &lt;/dd&gt; tags.  This may help in therare circumstance that someone wants to edit the HTML output using aneditor that understands HTML tags. (2.4.34)</procdesc><procdate>19991104</procdate></procstep><procstep><procdesc>Implemented word-wrap in mp's text output.  Added functionswrap_text() and wrap_subtree() to tree.c.  Modified config.cto recognize config word \"wrap\".  Modified write_text() intext.c to look for \"wrap\" within output:text, and if the valuegiven is greater than zero, to wrap all text values to thatwidth.  For example, &gt; output&gt;   text&gt;     wrap 72 in the config file causes all text in the text output file to bewrapped in paragraphs so that it fits in the first 72 charactersof the page.  This all assumes 2-space indentation in the textoutput, which is the default.  I also had to modify mp.c to callwrite_text() last among the output formats so as not to muck upany of the other formats.  (2.4.34)</procdesc><procdate>19991104</procdate></procstep><procstep><procdesc>Modified write_xml() in xml.c to not include a DOCTYPE declaration bydefault.  Modified config.c to recognize the element \"doctype\".  Ifspecified under output:xml, the value associated with \"doctype\" willbe output after the XML declaration.  Typically that will be a DOCTYPEdeclaration, but you could really screw things up and use somethingelse instead.  If the config file has an empty element output:xml:doctype,then the default DOCTYPE is output. Modified xml.c to not encode characters on output.  When XML is input,the default encoding is assumed to be UTF-8.  That can be overriddenon input by specifying the encoding in the XML declaration.  Whenplain text or SGML is input, the default encoding is ISO-8859-1.Either way, characters above &amp;127; are output AS IS in XML, and theonly characters that are encoded as entities are &lt;, &gt;, and &amp;. (2.4.35)</procdesc><procdate>19991116</procdate></procstep><procstep><procdesc>Modified config.c to recognize element \"info\".  Within output:info,a file element is used to specify the name of the info file thatcns generates.  (cns 2.3.2)</procdesc><procdate>19991118</procdate></procstep><procstep><procdesc>Modified html.c to fix bug where, if map projection parameters werespecified but no Map_Projection_Name was present, a null pointer wasdereferenced. (2.4.36)</procdesc><procdate>19991217</procdate></procstep><procstep><procdesc>Fixed bug in xml.c in which UTF-8 characters were being decoded oninput.  I want to pass these through unmolested, keeping track ofthe input encoding, and output them with the same encoding. (2.4.37)</procdesc><procdate>20000105</procdate></procstep><procstep><procdesc>Modified config.c to recognize \"stylesheet\", \"type\", and \"href\".  Modifiedxml.c to consult config for \"output:xml:stylesheet\"; if present, looksfor \"output:xml:stylesheet:type\" and \"output:xml:stylesheet:href\".  Putsthe values of those strings into an xml-stylesheet processing instruction.(2.4.37)</procdesc><procdate>20000105</procdate></procstep><procstep><procdesc>Modified xml.c to fix bugs in parser's handling of comments andunrecognized elements.  One side effect is that now both XML andSGML tags will be case sensitive. XML is case sensitive, but SGMLis not; this may cause trouble if there are any applications outthere that input metadata to mp with uppercase tag names. (2.4.38)</procdesc><procdate>20000106</procdate></procstep><procstep><procdesc>Modified decode_xml() in xml.c to increment line_number at the righttime, and not at the wrong time.  Error messages parsing XML shouldnow be more logical.  Thanks to Frank Roberts for pointing this out.(2.4.39)</procdesc><procdate>20000121</procdate></procstep><procstep><procdesc>Modified decode_text() in config.c and in local.c to explicitly look forand then disregard comments.  Here a comment is any line whose firstnon-blank character is the pound sign (#).  This change keeps commentsfrom disrupting mp's understanding of the indentation of the config fileand the extensions files, so that, for example, if you have &gt;output&gt;    html&gt;# this is a comment; note that it is indented less than the&gt;# element immediately above it.&gt;      file %s.html&gt;      faq %.faq.html Then the \"file\" and \"faq\" elements will now be properly recognizedas children of the \"html\" element.  I think it used to considerthem children of the comment, and thus were silently ignored.I bumped all minor version numbers by one for this fix.  (2.4.40)</procdesc><procdate>20000124</procdate></procstep><procstep><procdesc>Significant modification of memory management in all programs.  In tree.c,the allocate_item() and deallocate_item() routines have been replacedwith routines that allocate items in large chunks and manage the chunksthemselves.  This produces fewer calls to malloc() and free(), whichare costly on some systems.  Also in the process I think I found andfixed a number of less obvious bugs in the code, particularly in text.c.(2.5)</procdesc><procdate>20000128</procdate></procstep><procstep><procdesc>Introduced a new program \"mq\", built from guts of mp and tkme.  Thisprogram reads a Tcl script provided by the user and executes it.  Inaddition to the standard Tcl language, the following procedures maybe called: &gt;read_config &lt;config_file&gt;&gt;parse_text &lt;input_file&gt;&gt;find_first &lt;element_name&gt;&gt;find_in &lt;address&gt; &lt;element_name&gt;&gt;find_next &lt;address&gt; &lt;element_name&gt;&gt;value_of &lt;address&gt;&gt;forget find_first returns the address of an element in hex.  This should notbe modified, but should only be used as input to find_in, find_next,and value_of.  forget causes the entire metadata record to be removedfrom memory, so you can read another record.  (mq 1.0.0)</procdesc><procdate>200001</procdate></procstep><procstep><procdesc>Major change to mq.  The syntax is now more like that of Tk widgets: &gt;read_config config_file This command reads a standard config file, which will apply to allmetadata read in this Tcl session.  You can read only one config file,and you have to do it before you read any metadata. &gt;metadata m -parse input_file Here m is a Tcl variable name.  On output it is given a uniquevalue that allows mq to keep track of it.  This command returns 1 ifthe parsing was successful, 0 otherwise. &gt;$m find_first element_name Here m is a Tcl variable previously passed to the metadata commandabove, and element_name is a standard or extended element name.This command returns the address of a matching element in hex, orzero.  Use the address in subsequent commands. &gt;$m find_in address element_name Here address is the value returned from the find_first subcommandabove or a similar subcommand below.  If the given address is anelement whose name matches the target element_name, the same addressis returned.  Otherwise it returns the address of the first child,grandchild, or more distant descendant node whose name matches thetarget element_name. &gt;$m value_of ?-nonewline? address If the address given matches a data element, this returns its valueas a string.  If you specify -nonewline, then it comes as one line,with each line separated by a single blank space.  Otherwise eachline is separated by the newline character (ASCII 10). &gt;$m contains address This returns 1 if the address corresponds to one of the elements inthe tree, 0 otherwise. &gt;$m name address This returns the name of the element at the given address. &gt;$m next address&gt;$m prev address&gt;$m parent address&gt;$m child address These subcommands return the address of the next, previous, parent,or child node in the tree, relative to the given address.  Zero isreturned if there is no corresponding element.  These provide away to walk through the tree manually.&gt;$m forget This frees all of the memory used for a metadata record.  I cannotrecommend using the Tcl command unset; it seems to take a long timeto complete. Note that this interface allows you to read and manage more thanone metadata record at a time.  If you're going to read a lot ofrecords, you will probably want to use the unset command when you'redone with each one. (mq 2.1.0)</procdesc><procdate>20000202</procdate></procstep><procstep><procdesc>Modified mq.c to express the config-file handling in a different andmore useful way.  Now we have the following commands &gt;config read config_file reads the named config file, returns 1 if successful, 0 if not &gt;config find_first option returns the address of the named option in the config tree.  Thisis something you use in other config commands. &gt;config find_next address ?option? returns the address of the next option after the one whose addressis given as the address argument.  If no option name is specified,it looks for an option with the same name as the one whose addressis given. &gt;config find_in address option returns the address of the first option of the given name that iswithin the subtree headed by the node at the address given. &gt;config value_of address returns the value of the option at the address given. (mq 2.2.0)</procdesc><procdate>20000211</procdate></procstep><procstep><procdesc>Fixed bug in write_citation() in html.c that, when a Larger_Work_Citationwas present, passed its address, rather than the address of its childCitation_Information, to write_citation() for formatting.  The resultwas that no Larger_Work_Citation elements were being output.  (2.5.2)</procdesc><procdate>20000217</procdate></procstep><procstep><procdesc>Modified mq.c to include some new functions: &gt;value_set &lt;address&gt; &lt;text&gt; This assigns the given text to the element at the address givenif that element can contain a value.  An error is reported if theaddress is that of a compound element. &gt;insert ?-before | -after | -child? &lt;address&gt; ?&lt;element&gt;? An element of the specified type is added to the tree before,after, or as a child of the element whose address is specified.If no placement is specified (that is, neither -before, nor-after, nor -child is given), the element is added as a childof the node whose address is specified.  This function does NOTcheck to see whether the element so inserted is permitted to bethere by the FGDC metadata standard. &gt;delete &lt;address&gt; The element at the specified address is removed from the tree andcannot be recovered. &gt;copy &lt;address&gt; A copy of the element at the specified address is made and itsaddress is returned as the result of this operation.  The copyhas no links upward, forward, or back, and can thus be attachedto any other metadata record using the paste function. &gt;paste ?-before | after | -child? &lt;address&gt; &lt;subtree&gt; The subtree given as the final argument is attached to the currentmetadata record before, after, or as the last child of the elementat the address given.  This works only if the address argument isa compound element in the tree. &gt;write ?-format text | sgml | xml? &lt;filename&gt; The metadata record is written out to the disk file whose name isspecified as the final argument.  If no format is specified using\"-format &lt;format&gt;\", then the format is text unless the output fileends with \".sgml\" or \".sgm\" or \".xml\" in which cases the file willbe written as SGML or XML. (mq 2.3.0)</procdesc><procdate>20000222</procdate></procstep><procstep><procdesc>Modified process_metadata() enabling a -list option to the functionvalue_of.  When value_of is used with -list, the result is returnedas a list of lines rather than as a single block of text.  It makesno sense to have both -list and -nonewline, so writing the value_ofcommand with both options results in an error. &gt; is_compound &lt;address&gt; This function returns 1 if the element at the address given is acompound element, and 0 if the element is not compound. (mq 2.3.1)</procdesc><procdate>20000224</procdate></procstep><procstep><procdesc>Modified syntax.c to accept the value \"infinite\" for the elementDenominator_of_Flattening_Ratio.  This allows people to use thesphere as a geodetic model. Thanks to Aleta Vienneau for pointingout this problem.  (2.5.3)</procdesc><procdate>20000329</procdate></procstep><procstep><procdesc>Modified html.c to use write_html_value() instead of a simple munge() forthe text associated with a Browse_Graphic_File_Description.  In mostcases, this text is short and unadorned and a simple output would dofine.  However if the metadata writer put any &amp;gt;'s in the value, theyshould be respected as preformat indicators.  (mp 2.5.4)</procdesc><procdate>20000503</procdate></procstep><procstep><procdesc>Modified xml.c to write the apostrophe out in XML as &amp;apos; and thequotation mark as &amp;quot;.  Modified entities.c to include thesesymbols in the ISO-8859-1 encoding table, so they are generated inthe SGML output and recognized in SGML input as well.  Archie Warnockindicates some XML or SGML parsers need the apostrophe and quotationmarks to be encoded in this manner.  (mp 2.5.5)</procdesc><procdate>20000703</procdate></procstep><procstep><procdesc>Modified xml.c to call strcpy() rather than decode_entities() becausethe entities are decoded inline at an earlier step in the parsingprocess; the subsequent call to decode_entities() affected only theampersand character, which was then ignored.  Thanks to Frank Robertsfor having the perseverance to lead me to find this bug.  (mp 2.5.6)</procdesc><procdate>20000707</procdate></procstep><procstep><procdesc>mp crashed if you had an empty Data_Set_G-Polygon element.  Fix was tomodified upgrade.c to look for Data_Set_G-Polygon_Exclusion_Ring only ifa Data_Set_G-Polygon_Outer_G-Ring was found.  Thanks to Jennifer Lenzfor helping me find this bug.  (mp 2.5.7)</procdesc><procdate>20000803</procdate></procstep><procstep><procdesc>Added limited support for foreign languages.  This is implemented inmp, cns, xtme, and tkme through a command-line option -l &lt;code&gt; wherethe code is \"es\" for Spanish and \"id\" for Indonesian.  Preferredlanguage can also be specified in the config file using&gt;input&gt;  language esReplace es with id for Indonesian; en would be for English, but ifthe value is unrecognized or missing the software will use Englishelement names. Spanish-language element names were kindly provided by Dr. Ing. Carlos L\\ufffd\\ufffdpezof the Clearinghouse Nacional de Datos Geogr\\ufffd\\ufffdficos, Uruguay.&lt;http://www.clearinghouse.gub.uy/&gt; Indonesian-language element names were kindly provided by the IndonesianNational Coordination Agency for Surveys and Mapping BAKOSURTANAL French-language element names were kindly provided by theCanadian Center for Remote Sensing, Natural Resources Canada Coincidentally added an extra element to the standard, at end ofMetadata_Reference_Information I have added Metadata_Language.This element is not required, of course, but is permitted by mp.(mp 2.6) (mq 2.4)</procdesc><procdate>20000804</procdate></procstep><procstep><procdesc>Modified full_text() in html.c to check q-&gt;d before calling strlen()on it.  Avoids a crash that I believe occurred when reading XML filesand generating faq.html from them.  This change made the same day asthe change to 2.6.0 documented in the previous Process_Step, so I'mnot bumping the version number for it.</procdesc><procdate>20000804</procdate></procstep><procstep><procdesc>Modified html.c to rephrase the question for which the answer istaken from the Process_Steps.  Previously the question was \"Howwere the data processed and modified?\"  The question is nowwritten \"How were the data generated, processed, and modified?\"My hope is that this will help people to be comfortable describingdata creation as process steps.(mp 2.6.1)</procdesc><procdate>20000901</procdate></procstep><procstep><procdesc>Modified add_related_file() in both mp.c and cns.c to adda slash to the end of the result of getcwd.  Thanks toRobert Wilhite of NOAA-CSC for pointing this out. (2.6.2)</procdesc><procdate>20000915</procdate></procstep><procstep><procdesc>Modified local.c to output more informative messages whena problem is encountered in building the extensions list.Since this does not affect the program's normal operation,I'm not changing its version number.  Applies to mp, cns,xtme, and tkme.</procdesc><procdate>20000925</procdate></procstep><procstep><procdesc>Added direct support for the Biological Data Profile(FGDC-STD-001.1-1999) to all programs.  This involvedmodifications to keyword.h, keyword.c, actions.c,config.c, syntax.c, mp.c, tkme.c, cns.c, and xtme.c. Activate support for this profile by specifying\"profile bio\" under \"input\" in the config file.(mp 2.7.0)</procdesc><srcused>FGDC-STD-001.1-1999</srcused><procdate>20001006</procdate></procstep><procstep><procdesc>When I included the bio profile elements, I made it impossibleto use the same elements as extensions even when the bioprofile was not being used.  This is because the bio profileelements are kept by mp in the same bucket that it uses forstandard elements, and you can't use an extension that has thesame name as a standard element.  Some of my geological datasets use the geologic age extensions, which are taken from thebio profile, but they don't use the rest of the bio profile.One solution would be to simply use the bio profile forthese records.  In this case the geologic age elements arerecognized properly, but a spurious error message is generatedbecause the bio profile includes one mandatory element,Description_of_Geographic_Extent within Spatial_Domain.The missing element is flagged as an error. The correct solution is for mp and friends not to know thebio profile elements unless the bio profile is used bychoice.  That way the same elements can be introduced asextensions in the usual way.  So I modified keyword.cand made some changes to the main programs as well, tointroduce a function use_element_names (language,profile).This function selects standard element names using therequested language, and adds to them the profile elementnames (any profile you want, as long as it's the bioprofile).  (mp 2.7.1) (mq 2.5.1) (cns 2.6.1)</procdesc><procdate>20001010</procdate></procstep><procstep><procdesc>Modified keyword.c to correct two of the spanish-languageelement names, doubling the second 'r' Prerequisitos_T\\ufffd\\ufffdcnicos(new spelling Prerrequisitos_T\\ufffd\\ufffdcnicos) and including an acuteaccent over the i in Cuadricula (in 3 element names, nowspelled Cuadr\\ufffd\\ufffdcula.  (mp 2.7.2)</procdesc><procdate>20001027</procdate></procstep><procstep><procdesc>Modified translated() in html.c to not include trailingpunctuation in a URL except for '/' or '?'. Modified write_html() and write_faq_html() in html.c togive the internal hyperlinks unique names.  (mp 2.7.3)</procdesc><procdate>20001208</procdate></procstep><procstep><procdesc>Modified mq.c to enable commands detach and attach.  $m detach $pdetaches the element p from the metadata record m.  $m attach $q $pattaches the detached element p to the metadata record m as achild of q.  Full syntax for attach is like that for insert:$m attach ?-child | -before | -after? &lt;address&gt; &lt;detached address&gt;and it only works if the detached item has NULL for its parent,next, and prev links. (mq 2.5.3)</procdesc><procdate>20001214</procdate></procstep><procstep><procdesc>Modified syntax.c to allow free text in Map_Projection_Name.This reflects a change in the domain of that element thatwas introduced with CSDGM2 (FGDC-STD-001-1998).  The 1994version of the standard restricted the names to a specificset.  Thanks to Leslie Bearden for pointing this out. (mp 2.7.4)</procdesc><procdate>20010202</procdate></procstep><procstep><procdesc>Modified check_Identification_Information() in syntax.cto permit Spatial_Domain to be missing if using theBiological Data Profile.  In the BDP, Spatial_Domain ismandatory if applicable.  Thanks to Diane Schneider andTerry Giles for pointing this out.  (mp 2.7.5)</procdesc><procdate>20010207</procdate></procstep><procstep><procdesc>Modified check_Citation_Information() in syntax.c so that if thebiological profile is being used, Geospatial_Data_Presentation_Formis mandatory.  Thanks to Terry Giles for pointing this out.(mp 2.7.6)</procdesc><procdate>20010209</procdate></procstep><procstep><procdesc>Modified parse_sgml() in sgml.c to read the whole input file atonce, rather than line-by-line.  This avoids a limitation imposedon line length in the input file.  Thanks to Margaret Lyszkiewiczfor pointing this out.  Also added a question to the FAQ-style HTMLoutput, \"What similar or related data should the user be aware of?for which the answer is taken from Cross_Reference.  (mp 2.7.7)</procdesc><procdate>20010214</procdate></procstep><procstep><procdesc>Modified parse_sgml() in sgml.c to fix bug in handling multilineinput files introduced by previous revision.  (mp 2.7.8)</procdesc><procdate>20010215</procdate></procstep><procstep><procdesc>Modified check_Taxonomy() in syntax.c to permit more thanone Taxonomic_Classification in Taxonomy.  This was doneat the request of the authors of the BDP to reflect theirintent that the standard permit organisms from more thanone kingdom to be documented in the same record.  As itis formally written, the BDP makes it essentially impossibleto include in the same record taxonomic classification infofor both plants and animals, or plants and fungi, for example.(mp 2.7.9)</procdesc><procdate>20010227</procdate></procstep><procstep><procdesc>Modified syntax.c to check the text value of the BDP elementCase_Sensitive and to not require Metadata_Review_Date ifMetadata_Future_Review_Date is given.  Thanks to Terry Giles(Johnson Controls working for USGS) for pointing this out.(mp 2.7.10)</procdesc><procdate>20010326</procdate></procstep><procstep><procdesc>Modified the paste command in mq so that it takes a stringor XML string as its final argument rather than theaddress of a previously-detached subtree.  Prior to thisthe attach command and the paste command did the samething.  (mq 2.5.5)</procdesc><procdate>20010420</procdate></procstep><procstep><procdesc>Modified write_xml_item() in xml.c to examine the staticvariable element_order when writing the children of anelement.  element_order is an enum that can be eitherSTANDARD or ASIS (in future there could be others).If its value is STANDARD, then the elements are writtenin the order given in FGDC-STD-001-1998 and extensionsare written after all standard elements.  This is andhas been the default behavior.  If the value is ASIS,then elements are written in the order they appear inthe parse tree (as input in mp, as modified by Tkme). Modified config.c to recognize the element \"order\"which will be used when found under output:xml. The effect of this change is to allow people to explicitlyrequest that mp and Tkme NOT rearrange the elements in theorder given in the FGDC standard.  Since most profileshave not put extensions after all standard elements,using the standard order causes the extensions to beput out of the order expected in the profile.  Thischange allows mp and Tkme to retain the input order.(mp 2.7.11) (tkme 2.8.10) (xtme 2.6.3) (mq 2.5.7)</procdesc><procdate>20010525</procdate></procstep><procstep><procdesc>Modified write_html() and write_faq_html() in html.c to lookfor a config option header_file if header is not specifiedunder output:html in the config file.  If header_file isfound, its value is expected to be a readable text filewhose contents will be incorporated into the HTML output asif they had been specified as the header in the config fileitself.  This allows you to maintain the HTML header separatefrom the config file.  A corresponding change was made forfooters; if the footer directive is not found underoutput:html, then if a footer_file directive is present,its contents will be used as the HTML footer.  (mp 2.7.12)</procdesc><procdate>20010529</procdate></procstep><procstep><procdesc>Modified write_faq_html() in html.c so that a &amp;nbsp; is writtenif the Enumerated_Domain_Value_Definition is empty.  (mp 2.7.13)</procdesc><procdate>20010621</procdate></procstep><procstep><procdesc>Modified upgrade.c to remove blank lines within Enumerated_Domainelements.  The code there was creating an extraneous containerwhen a blank line immediately followed Enumerated_Domain andpreceded the corresponding Enumerated_Domain_Value.  Thanks toPeg Rawson (USGS and National Atlas) for helping to find this bug.(mp 2.7.14)</procdesc><procdate>20010626</procdate></procstep><procstep><procdesc>Modified keyword.c to include element names in catalan providedby Dr. Ing. Carlos Lopez of Uruguay.  This includes updatedspanish element names as well.  (mp 2.7.15) (mq 2.5.9)(cns 2.7.1) (xtme 2.6.4) (tkme 2.8.11)</procdesc><procdate>20010719</procdate></procstep><procstep><procdesc>Fixed buffer overflow in extension_of() and extension_of_sgml() inlocal.c.  All programs affected.  (mp 2.7.16) (mq 2.5.10)(cns 2.7.2) (xtme 2.6.5)  (tkme 2.8.12) (err2html 2.1.1)</procdesc><procdate>20010803</procdate></procstep><procstep><procdesc>Modified html.c to strip carriage-returns from the textincluded via the header_file directive of the configfile. (mp 2.7.18)</procdesc><procdate>20010905</procdate></procstep><procstep><procdesc>Modified upgrade.c to avoid seg fault when an emptyEnumerated_Domain element is encountered in the input.Thanks to Tirumal R. Jallepalli for pointing this out.(mp 2.7.19)</procdesc><procdate>20011004</procdate></procstep><procstep><procdesc>Modified local.c to recognize the element \"Z39.50_Tag\" as thesame as \"z3950\".  This tag is not used by mp at present, andmay never be used.  The change makes the extension file justa little less code-like and a little more readable, but forpractical purposes has no effect on the behavior of mp or theother programs.  (version not changed)</procdesc><procdate>20011009</procdate></procstep><procstep><procdesc>Modified upgrade.c so that it leaves alone any valueof Metadata_Standard_Version beginning with \"FGDC-STD-001\"This causes it to leave alone the specific versionnumbers of approved profiles of FGDC-STD-001-1998.(mp 2.7.20)</procdesc><procdate>20011020</procdate></procstep><procstep><procdesc>Modified xml.c so that leading spaces in element valuesare skipped.  This is equivalent to the behavior of mp whenreading indented text files, and makes it easy to check forspecific text values such as for Progress.  Thanks to TravisStevens (NOAA-NGDC) for pointing this out.  (mp 2.7.21)</procdesc><procdate>20011029</procdate></procstep><procstep><procdesc>Modified config.c to recognize element \"Label\".Modified html.c to look for \"label\" within output:html:linkinstead of \"text\" in the same place, to preserve thecompound nature of \"text\" as a config element within \"output\".(mp 2.7.22)</procdesc><procdate>20011031</procdate></procstep><procstep><procdesc>Modified mq so that elements or subtrees inserted orpasted without an explicit -before or -after directivewill be emplaced in the order specified by the Standard.(mq 2.5.12)</procdesc><procdate>20011109</procdate></procstep><procstep><procdesc>Modified mp.c to remember the character encoding of the inputfile.  This is kept as a string, and should normally be eitherUTF-8 or ISO-8859-1.  New global functions set_character_encodingand get_character_encoding access this attribute. Modified html.c to get the character encoding and output UTF-8characters correctly.  Previous to this, UTF-8 characters wereinterpreted as ISO-8859-1, which they aren't, so Europeans whoused UTF-8 got strange-looking stuff in their HTML.(mp 2.7.23)</procdesc><procdate>20011126</procdate></procstep><procstep><procdesc>Modified attach_subtree_in_order() in mq.c to fix bug inwhich the subtree was appended to the end of the rootnode even after it had been placed properly.  This causeda loop to occur in the tree.  (mq 2.5.13)</procdesc><procdate>20020128</procdate></procstep><procstep><procdesc>Modified syntax.c to note as an error the use of 00 in themonth and day parts of a date, as in \"19950000\".  I see noprovision in the available documentation to suggest that 00is a legitimate value for either the month or the day.(mp 2.7.24)</procdesc><procdate>20020225</procdate></procstep><procstep><procdesc>Modified html.c to use write_html_value() instead of just munge()for expressing the Entity_Type_Definition and Attribute_Definitionin FAQ-style HTML.  (mp 2.7.25)</procdesc><procdate>20020416</procdate></procstep><procstep><procdesc>Modified sgml.c and xml.c so that parsing an SGML documentis actually done by the XML parser code.  There's a problemwith the old SGML parser code that I see no good reason tofind and fix.  The only negative effect of this change isthat ASTM tags for SGML metadata are no longer supported.But I suspect that no one has ever used ASTM tags for metadata,and that no one ever will.  (mp 2.5.26) (mq 2.5.14)</procdesc><procdate>20020509</procdate></procstep><procstep><procdesc>Modified write_html_faq() in html.c to fix bug that caused faultwhere Single_Date/Time has no Calendar_Date inside it.  Thanksto Aleta Vienneau for pointing this out.  (mp 2.7.27)</procdesc><procdate>20020510</procdate></procstep><procstep><procdesc>Modified config.c to recognize style_file and script_file.Modified html.c to look for these elements within output:htmland include the contents of the files they name within thehead element of the HTML output.  (mp 2.7.28)</procdesc><procdate>20020613</procdate></procstep><procstep><procdesc>Modified check_date() in syntax.c so that zeros beyond the firstfour decimal digits are not considered an error IF the date hasone of the prefixes bc, cc, or cd.  Thanks to Travis Stevens forpointing this problem out.  (mp 2.7.29)</procdesc><procdate>20020702</procdate></procstep><procstep><procdesc>Modified copy_item() in tree.c so that it properly handlescases where p-&gt;d is NULL.  This affected copy operationsin Tkme where the input file was XML.  Thanks to HughPhillips for pointing this out. Also made extensions not case sensitive when encounteredin indented text input (XML tags are always case sensitive).(mp 2.7.30) (mq 2.5.15) (cns 2.7.3) (xtme 2.6.8)(tkme 2.8.17) (err2html 2.1.2)</procdesc><procdate>20020710</procdate></procstep><procstep><procdesc>Modified check_Standard_Order_Process() in syntax.c so that itgenerates an error (type \"missing\") message when the givenStandard_Order_Process contains neither a Digital_Form nor aNon-digital_Form.  Thanks to Terry Giles for pointing this out.(mp 2.7.31)</procdesc><procdate>20020829</procdate></procstep><procstep><procdesc>Modified decode_xml() in xml.c to handle properly acomment at the beginning of the XML input file.  Thanksto Daniel Berhanu for bringing this problem to light.(mp 2.7.32) (xtme 2.6.9) (Tkme 2.8.18) (mq 2.5.16)</procdesc><procdate>20020910</procdate></procstep><procstep><procdesc>Modified write_xml_item() in xml.c so that when asked to writeelements in standard order it uses a more straightforwardmethod, avoiding find_key().  This allows it to discoverchild elements of the same type as the parent.  Thanks toHelena Schaefer for alerting me to this problem.(mp 2.7.33) (mq 2.5.17) (xtme 2.6.10) (tkme 2.8.19)</procdesc><procdate>20021001</procdate></procstep><procstep><procdesc>Modified write_html() and write_faq_html() in html.c to removecarriage returns from included script files and included stylefiles (it already did this to included header files.  Thisavoids having extra end-of-line characters in the output onWindows systems.  (mp 2.7.34)</procdesc><procdate>20030204</procdate></procstep><procstep><procdesc>Modified decode_xml() in xml.c so that when a comment is found,the buffer is emptied if it only contains whitespace to thatpoint.  Thanks to Archie Warnock for showing the problem.(mp 2.7.35)</procdesc><procdate>20030225</procdate></procstep><procstep><procdesc>Added direct support for the shoreline profile and theremote-sensing profile.  This entails modifications inkeyword.h, keyword.c, syntax.c, ps8.c, and actions.c.All programs got bumped a minor version number for this. One of the side effects is a simplification so that allelements defined in any of these profiles will berecognized and their structure checked.  However unlessyou put \"profile rs\" or \"profile sh\" into the inputsection of the config file, standard elements won't bejudged according to the rules specified in the profile.So if you use elements from one of the profiles butyou don't tell mp you're using that profile, thoseelements may be flagged as errors because mp thinks theyaren't supposed to be there.  But that, in my opinion,is better than having them come up as unrecognizedelements.  (mp 2.8.0) (mq 2.6.0)</procdesc><procdate>20030307</procdate></procstep><procstep><procdesc>Modified write_html() and write_faq_html() to look for anoption omit_url within output:html; if present, the URLis not written out at the end of the file. (mp 2.8.1)</procdesc><procdate>20030520</procdate></procstep><procstep><procdesc>Modified upgrade.c to better handle blank lines within theKeywords sections and multiple Theme, Place, Stratum, and Temporalelements.  Thanks to Tobin Smith (Veridyne) for bringing theproblem to my attention.  (mp 2.8.2)</procdesc><procdate>20030528</procdate></procstep><procstep><procdesc>Modified do_meta_tags() in html.c so that the dc.langelement is not always \"en\", but could be the value ofa Language or Metadata_Language element or the valueassigned to the input:language option in the configfile.  It does not (yet) pick up a language specifiedon the command line with the -l switch.  Thanks toTerry Giles for pointing this issue out.  (mp 2.8.3)</procdesc><procdate>20030723</procdate></procstep><procstep><procdesc>Modified actions.c to add Description_of_Geographic_Extentwithin Spatial_Domain in shprofile_element array.  Modifiedsyntax.c to allow Description_of_Geographic_Extentin Spatial_Domain and Barometric_Pressure withinMarine_Weather_Conditions when using shoreline profile.Thanks to Mike Moeller (NOAA) for pointing these problemsout.  (mp 2.8.4)</procdesc><procdate>20030805</procdate></procstep><procstep><procdesc>Modified parts of html.c to make the output html conform to\"HTML 4.01 Transitional\", giving both the outline-style andthe FAQ-style HTML output the DOCTYPE declaration&gt;&lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\"&gt;   \"http://www.w3.org/TR/html4/loose.dtd\"&gt;Thanks to Florence Wong (USGS) for pointing out the need to makesome fixes in the code to achieve better conformance.  (mp 2.8.5)</procdesc><procdate>20030806</procdate></procstep><procstep><procdesc>Modified insert_item_after(), insert_item_before(),delete_children(), and delete_item() in tree.c tosimplify their structure and, I believe, fix a bugthat caused an inserted element to not appear inthe tree if an adjacent element was deleted.  Thesechanges should improve Tkme but have their biggesteffect on mq, so mq's version number is incremented.mp would not be affected.  (mq 2.6.1)</procdesc><procdate>20030813</procdate></procstep><procstep><procdesc>Modified local.c, creating a function add_extension() thatcan be called while parsing an XML file to add an unrecognizedtag as an extension (albeit one about which we know little).Modified decode_xml() in xml.c to call this function.  Thenet effect of this change is that unrecognized elements inXML and SGML files will be tolerated and can be manipulated,rather than ignored and possibly discarded altogether.  Thepractical effect, I hope, is that XML records produced byany version of ArcCatalog can be edited safely using Tkmeand parsed with mp.  Ideally, mp would be told exactlywhere the extended elements go and how they should appear,but with the emphasis on XML, it is possible to includenew tags in metadata without documenting them beyondinclusion in a DTD, and the DTD step could conceivably beskipped also, since well-formed XML suits most applications.(mp 2.8.6) (mq 2.6.2) (tkme 2.9.3) (xtme 2.7.2)</procdesc><procdate>20030923</procdate></procstep><procstep><procdesc>Modified keyword.c to add a function is_standard() which, givenan element's numerical key, tells whether the element is partof the FGDC standard (through FGDC-STD-001-1998) or not. Modified allow() in syntax.c so that only a warning is issued,not an error, when a non-standard element appears where it isnot expected to be.  This is a significant change from theregulatory perspective.  It means that mp will not call anerror the occurrence of an extension even if mp doesn't knowwhat the extension is or where it's supposed to go.  Thechief benefit of this is that ESRI and other creators ofmetadata tools can now invent and add elements to themetadata they create without me having to play catch-up andtry to get accurate descriptions of what these extensions areand where they should go. This doesn't mean that downstream software will understandthe information in nonstandard elements, but if your metadatarecord was generated by some software, mp won't tell you it'swrong just because there's a nonstandard element in it thatmp doesn't know about ahead of time.(mp 2.8.7)</procdesc><procdate>20031218</procdate></procstep><procstep><procdesc>Modified allow() in syntax.c to correct bug in the previouschange.  Modified decode_xml() in xml.c to generate awarning when an unknown extension is encountered.  (mp 2.8.8)</procdesc><procdate>20040107</procdate></procstep><procstep><procdesc>Modified decode_xml() in xml.c to use expat, a freely-available XMLparser, rather than the original parser code.  This will make theinput of XML documents more consistent, and fix the bug in whichthe occurrence of a comment within the text of an XML element causedthe parser to discard the entire text (thanks to Hugh Phillips fornoticing this problem). Backed off a prior change in which unrecognized extensions wererecognized and not discarded.  Tkme wasn't written to distinguishunknown compound extensions from scalar elements, so its behaviorbecame inconsistent when unknown extensions were permitted.(mp 2.8.9) (mq 2.6.3) (tkme 2.9.5) (xtme 2.7.3)</procdesc><procdate>20040123</procdate></procstep><procstep><procdesc>(sigh) Fixed bug in xml input code, where a textual value larger than8k bytes would cause a segmentation violation.  No new behavior otherthan this.  (mp 2.8.10) (tkme 2.9.6) (mq 2.6.4) (xtme 2.7.4)</procdesc><procdate>20040126</procdate></procstep><procstep><procdesc>Modified the element command in mq so that it distinguishes among theknown profiles (biological data, shoreline, remote-sensing) that arebuilt into mp.  (mq 2.6.5)</procdesc><procdate>20040129</procdate></procstep><procstep><procdesc>Created a new extension file ESRI-ISO.ext within tools/ext.  I built thisfrom the document type definition file found insidehttp://www.esri.com/metadata/esri_iso01dtd.zip Since I don't understand the ISO documents fully I cannot judgehow well the DTD corresponds to the ISO standard.  I have usedthe new ext file to parse metadata output by ArcCatalog 8.3,and it appears to work, causing mp to understand and not discardthe ISO elements that ESRI has used.  In principle this shouldalso have the effect of allowing people to edit ArcCatalogmetadata in place using Tkme without having to export therecord first.  However caution is advised: make a backup copybeforehand, and keep it until you are certain that both mp andArcCatalog can read the XML file successfully.</procdesc><procdate>20040129</procdate></procstep><procstep><procdesc>Modified config.c and local.c to send to an internally-managed bufferany error or warning messages generated while parsing the config fileor the extension files.  The contents of these buffers can beretrieved by calling config_errors() or ext_errors().  So the callingprogram (typically mp or Tkme) decides if, when, and how thosemessages are shown to the user.  Modified mp.c to show those messagesafter the banner is displayed. (mp 2.8.11)</procdesc><procdate>20040213</procdate></procstep><procstep><procdesc>Modified array rule_table in syntax.c to properly direct mpto run check_Bounding_Altitudes when a Bounding_Altitudesis detected (previously this entry was not present, and sothe Bounding_Altitudes element was checked as though it werea scalar element).  Thanks to Terry Giles for pointing thisproblem out.  (mp 2.8.12)</procdesc><procdate>20040405</procdate></procstep><procstep><procdesc>Modified element_cmd() in mq.c to return the section number fromthe standard document (1998 version) using the element commandlike [element $name -number].  Note that section numbers arehighly problematic; they only refer to a specific version of thestandard document, some of the numbers have changed from the 1994version to the 1998 version, one of the elements now has twodifferent section numbers (Online_Linkage occurs both withinCitation_Information and within Metadata_Extensions), and sectionnumbers do not occur at all in the biological or remote sensingprofiles. (mq 2.6.7)</procdesc><procdate>20040412</procdate></procstep><procstep><procdesc>Modified parse_sgml() within xml.c so that parsing of SGML actuallybegins with &lt;metadata&gt; rather than at the beginning of the file.This is because expat chokes on the SGML DOCTYPE declaration, whichdoesn't have the same form as an XML DOCTYPE.  Modified decode_xml()in xml.c to first parse a set of entity declarations if the recordbegins with &lt;metadata&gt;.  These entity declarations are not includedif the file begins with an XML declaration.  The chief use of themis to help parse SGML records previously created using mp.  Thanksto Sarah McGuire (NPS, Madison) for pointing this issue out.(mp 2.8.13) (xtme 2.7.6) (tkme 2.9.9) (mq 2.6.8)</procdesc><procdate>20040603</procdate></procstep><procstep><procdesc>Modified check_Range_of_Dates_Times() within syntax.c so that itgenerates a missing element error if you have a Beginning_Datebut no Ending_Date.  This problem only occurred when using thebio profile.  Thanks to Terry Giles (USGS) for pointing this out.(mp 2.8.14)</procdesc><procdate>20040811</procdate></procstep><procstep><procdesc>Modified check_Digital_Form() in syntax.c so that Digital_Transfer_Optionis not repeatable.  Thanks to Eric Compas (NPS, UWisc) for pointing thisproblem out.  (mp 2.8.15)</procdesc><procdate>20040816</procdate></procstep><procstep><procdesc>Modified character_data() in xml.c to allow text of more than8k characters to be ingested at a time.  This became a problemif you had an XML metadata record containing a textual valuethat was larger than 8192 bytes all on the same line.  (mp 2.8.16)</procdesc><procdate>20040913</procdate></procstep><procstep><procdesc>Expat automatically converts ISO-8859-1 to UTF-8, so if you readan XML file, the internal representation of characters will beUTF-8.  I still think it's good to store the plain text asISO-8859-1, so I now need to convert UTF-8 to ISO-8859-1 whenwriting plain text. Modified write_text_item() in text.c to convert UTF-8 charactersto ISO-8859-1.  Created a separate module encoding.c to containthe function unicode_of_utf8(), now global in scope.  Removed thecopies of that function found in html.c and xml.c.(mp 2.8.16) (mq 2.6.9) (tkme 2.9.11) (xtme 2.7.7)</procdesc><procdate>20040914</procdate></procstep><procstep><procdesc>Modified write_html() and write_html_faq() in html.c to translatethe title from UTF-8 to ISO-8859-1 if the metadata are stored inUTF-8.  The code already carried out this translation for thetext within the metadata but I had neglected to do the same forthe title, specifically when writing the html &lt;title&gt; elementwithin the document head and when writing the heading tag &lt;h1&gt;in outline style, &lt;h3&gt; in FAQ style.  (mp 2.8.17)</procdesc><procdate>20040915</procdate></procstep><procstep><procdesc>Modified check_Map_Projection() in syntax.c to not allowOther_Projection's_Definition within Map_Projection.Modified check_Map_Projection_Parameters() to allowOther_Projection's_Definition to occur there. Modified numbers.c to assign the correct new section numberfor Other_Projection's_Definition. Modified actions.c to move Other_Projection's_Definition fromMap_Projection to Map_Projection_Parameters.  This allows tkmeand xtme to know where to let you put it. Modified write_html_faq() in html.c to better handle theoccurrence of Other_Projection's_Definition, and also ofMap_Projection_Parameters in Map_Projection. Thanks to James W. Allor (US Census Bureau) for pointing this out. Modified upgrade().  If Other_Projection's_Definition appearswithin Map_Projection, move it into Map_Projection_Parameters.If no Map_Projection_Parameters exists, create one for this.(mp 2.8.17) (err2html 2.1.4) (tkme 2.9.12) (xtme 2.7.8)</procdesc><procdate>20040917</procdate></procstep><procstep><procdesc>Modified equalize_indented_scalars() in text.c so that parentlinks and indent values are set properly when correcting textcontaining variously-indented lines.  Thanks to Jo Anne Stapletonfor giving me enough data to find and correct this rare problem.(mp 2.8.18) (mq 2.6.10) (xtme 2.7.9) (tkme 2.9.13)</procdesc><procdate>20041104</procdate></procstep><procstep><procdesc>Modified config.c to recognize a new directive \"schema\" within output:xml. Modified xml.c to write the value given in output:xml:schema as one ofthe attributes of the root element (Metadata) when writing XML.If a schema is specified in the config file and the root element hasno other attributes, then the root element will be assigned theattribute xmlns:xsi with the value http://www.w3.org/2001/XMLSchema-instancealong with the attribute xsi:noNamespaceSchemaLocation, whose value willbe the text given to output:xml:schema in the config file.(mp 2.8.19) (mq 2.6.11) (tkme 2.9.14) (xtme 2.7.10)</procdesc><procdate>20050112</procdate></procstep><procstep><procdesc>Modified keyword.c, replacing array fr_std[] with new French-languageelement names provided by John Cree.  This completes support for Frenchfor both standard elements (those contained within the 1998 CSDGM) andthe Biological Data Profile.  At this writing, elements from theshoreline and remote sensing profiles remain untranslated (that is,the \"French\" versions of those extended elements are the English.(mp 2.8.20) (cns 2.8.1) (xtme 2.7.11) (tkme 2.9.15) (mq 2.6.12)(err2html 2.1.6)</procdesc><procdate>20050128</procdate></procstep><procstep><procdesc>Modified write_html() and write_html_faq() in html.c to accept thestylesheet element in the config file in much the same way as itis handled for xml.  In this case the stylesheet type can beomitted, in which case the type will be assumed text/css.  Thevalue href will be used as the link to an external CSS.  Thisinformation is written into the head element as a link element:&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"...\"&gt;Furthermore it is possible to have more than one stylesheetelement within output:html; each generates a separate &lt;link&gt;element in the HTML output.(mp 2.8.21)</procdesc><procdate>20050210</procdate></procstep><procstep><procdesc>Modified url fragments in links.c so that spaces and punctuationare replaced with the corresponding hex code, like '%20' for space.(err2html 2.1.7)</procdesc><procdate>20050211</procdate></procstep><procstep><procdesc>Modified write_html_faq() to pass the value of Unrepresentable_Domainthrough write_html_value() rather than simply writing it out.  Myopinion is that the text in Unrepresentable_Domain ought to beshort and uncomplicated (that is, not containing &gt;'s) but I seeno reason not to accommodate those who would put lists or othersemi-structured information there.  (mp 2.8.22)</procdesc><procdate>20050405</procdate></procstep><procstep><procdesc>Modified the French-language name of the elementQuantitative_Attribute_Accuracy_Assessment.  Thanks to John Cree(Environment Canada) for pointing this problem out.(mp 2.8.23) (cns 2.8.2) (xtme 2.7.12) (tkme 2.9.17)(mq 2.6.13)</procdesc><procdate>20050615</procdate></procstep><procstep><procdesc>Modified mp.c to not upgrade metadata by default if the fileformat is XML. The upgrade process was making mischief whena keyword thesaurus element was out of order. (mp 2.8.24)</procdesc><procdate>20050829</procdate></procstep><procstep><procdesc>Modified subcommands of mq.  Fixed \"attach\" so that it returns anerror when called without the address of a snippet to attach.Changed \"name\", \"line\", \"parent\", \"child\", \"prev\", and \"next\" sothat these work when the address given is a detached subtree(snippet). Previously these subcommands required the address to bea valid node in the current parse tree.  (mq 2.6.14)</procdesc><procdate>20050922</procdate></procstep><procstep><procdesc>Modified mq.c to add a subcommand prune for a parsed metadatarecord.  (mq 2.6.15)</procdesc><procdate>20050926</procdate></procstep><procstep><procdesc>Modified syntax.c to flag as an error the co-occurrence ofmore than one type of domain within Attribute_Domain_Values.Modified uppgrade.c to try to patch affected metadata byinserting additional Attribute_Domain_Values elements wherethere are extra domain values sections.(mp 2.8.25)</procdesc><procdate>20051121</procdate></procstep><procstep><procdesc>Modified actions.c to eliminate duplication in the remote-sensingprofile element Instrument_Information that was causing XML filesto contain duplicate information.  Also modified upgrade.c toreplace the Metadata_Standard_Version value only if the existingvalue does not begin with \"FGDC-STD-\" rather than the morespecific \"FGDC-STD-001\".  Thanks to Pete Keehn (NOAA) for pointingthese problems out.  (mp 2.8.26) (mq 2.6.16) (xtme 2.7.12) (tkme2.9.18)</procdesc><procdate>20060127</procdate></procstep><procstep><procdesc>Integrated support for German element names and composed a Germanhelp file for the editors.  This is based on the work of PeterKorduan (University of Rostock).  The help file includesinformation about the precision agriculture extension that was thesubject of his work.  Created a help file for French as well,using the translation of the Standard provided by EnvironmentCanada. Modified html.c to avoid a crash when reading an XML file whoseCitation Title contains blank lines.  Thanks to Hanna Habashy(Univ. South Carolina) for pointing to this problem. (mp 2.8.27) (cns 2.8.3) (xtme 2.7.14) (tkme 2.9.19) (mq 2.6.17)</procdesc><procdate>20060228</procdate></procstep><procstep><procdesc>Modified element_start() in xml.c to flag as an error anynon-blank text found in the text buffer when an element start tagis found in XML input.  Previously, mp was holding onto the textand would assign it to the next element for whom a close tag wasencountered.  So it was possible to have text in the wrong placebut mp would put it somewhere else.  This is surely a rare andstrange condition, but it is one that ought to be flagged as asignificant error if it occurs.  (mp 2.8.28) (xtme 2.7.15)(tkme 2.9.20) (mq 2.6.18)</procdesc><procdate>20060331</procdate></procstep><procstep><procdesc>Modified config.c to recognize element \"encoding\" to be used under input(as a substitute for 'codeset') or under output:html.  Modified html.cto allow the output to be written as UTF-8 if output:html:encoding isset to UTF-8 in the config file, otherwise HTML output defaults toISO-8859-1.  I believe this will make it possible in principle tosupport Russian text.  (mp 2.8.29)</procdesc><procdate>20060503</procdate></procstep><procstep><procdesc>Fixed a few problems with the implementation of UTF-8 conversion,particularly in HTML output files. (mp 2.8.30)</procdesc><procdate>20060504</procdate></procstep><procstep><procdesc>Modified encoding.c to fix UTF-8 encoding.  Thanks to Olga Vasik(TINRO, Vladivostok, Russia) for persistence in following up onthis issue.  Because this has the effect of making UTF-8 encodingreally work for HTML output, I'm bumping up the 2nd-level versionnumber. (mp 2.9.0)</procdesc><procdate>20060511</procdate></procstep><procstep><procdesc>Modified mp.c so that -fixdoc is detected before -f in the list ofcommand-line arguments.  This re-enables -fixdoc (which should berarely needed, but I needed to use it today!) (mp 2.9.1)</procdesc><procdate>20060630</procdate></procstep><procstep><procdesc>Modified upgrade() in upgrade.c so that no change is made ifthere is exactly one *_Keyword_Thesaurus in a Theme, Place,Stratum, or Temporal element, regardless of its positionwithin that element.  (mp 2.9.2)</procdesc><procdate>20061003</procdate></procstep><procstep><procdesc>Modified syntax.c to allow Oblique_Line_Azimuth andOblique_Line_Point within Map_Projection_Parameters instead ofOblique_Line_Latitude and Oblique_Line_Longitude.  Thanks to MatthewMcCready (Census Bureau) for pointing this mistake out. (mp 2.9.3)</procdesc><procdate>20070305</procdate></procstep><procstep><procdesc>Modified check_scalar_children() in syntax.c so that if an elementthat is supposed to contain some value contains instead anotherelement (this can happen if someone misplaces an element in XML),it doesn't crash but instead generates a \"misplaced element\" error.Came to attention by examining web server error logs of the onlinemetadata validation service. (mp 2.9.4)</procdesc><procdate>20070920</procdate></procstep><procstep><procdesc>Modified main() in mp.c to include the original input file name inthe error output.  Modified write_html() and write_html_faq() in html.cto include the original input file name as a &lt;meta&gt; tag in the HTMLoutput, with name=\"generated-from\". Modified upgrade() in upgrade.c so that Metadata_Standard_Version isupgraded only if it appears within Metadata_Reference_Information.The only way I can imagine it being anywhere else is in the metadatafor mp itself, where it had occurred within the text of a coupleof Process_Description elements.  (mp 2.9.5)</procdesc><procdate>20070927</procdate></procstep><procstep><procdesc>Modified element_start() and element_end() in xml.c to notnull-terminate the output data buffer if the buffer pointer isNULL.  This condition arose when an end tag was encounteredwithout the parser ever seeing any character data.  Thanks toGennady Khokhorin for noticing the problem.  (mp 2.9.6)(xtme 2.7.17) (tkme 2.9.22) (mq 2.6.21)</procdesc><procdate>20080122</procdate></procstep><procstep><procdesc>Modified keyword.c, adding support for Portuguese element nameskindly supplied by&gt; Luis Cavalcanti Bahiana&gt; Pesquisador em Informa\\ufffd\\ufffd\\ufffd\\ufffdes Geogr\\ufffd\\ufffdficas&gt; IBGE- Coordena\\ufffd\\ufffd\\ufffd\\ufffdo de Geografia&gt; Av. Rep\\ufffd\\ufffdblica do Chile 500-12 andar&gt; Brazil(mp 2.9.7) (cns 2.8.4) (xtme 2.7.18) (tkme 2.9.23) (mq 2.6.22)(err2html 2.1.9)</procdesc><procdate>20080505</procdate></procstep><procstep><procdesc>Modified mp.c to write the date and time into the error log fileas information.  (mp 2.9.8)</procdesc><procdate>20080916</procdate></procstep><procstep><procdesc>Modified write_sgml_text() in sgml.c to behave likewrite_xml_text() in xml.c: don't convert characters to entityreferences.  This allows UTF-8 characters to be put into the SGMLoutput as they are, and we just hope that software downstream canbe told they are UTF-8.  mp 2.9.9</procdesc><procdate>20090130</procdate></procstep><procstep><procdesc>Modified html.c to remove unnecessary hyphen from\"Frequently-anticipated questions\". Modified html.c to enlarge thefixed sizes allowed for personal names in the FAQ HTML format.Modified xml.c to cope properly with UTF-8 characters at the endof an element's text.  Under Microsoft Windows XP these weretruncated due to unexpected behavior of the isspace() function onthat system.  Thanks to Aleta Vienneau for information leading tothis fix.  Modified build process for Microsoft Windows to usethe MinGW compiler, creating Makefile.mgw for this purpose.(mp 2.9.10) (mq 2.6.23) (xtme 2.7.19) (Tkme 2.9.24)</procdesc><procdate>20091102</procdate></procstep><procstep><procdesc>Modified parse_name() in html.c to detect the situation wherethere are multiple commas or an \"and\" in the name given, andconsider the value as a non-parseable name (that is, one thatcannot be re-expressed as \"last, first middle\". (mp 2.9.11)</procdesc><procdate>20091211</procdate></procstep><procstep><procdesc>Modified check_scalar_children() in syntax.c so that validvalues of Clock_Time_Drift are permitted (needed a negativesign in the first clause of the if statement).  Thanks to RudiGens for pointing this problem out. Modified write_xml_text() in xml.c so that it does not translatesingle quote into the entity &amp;apos; and double quote into theentity &amp;quot;  I believe these translations are not necessary.Thanks to Dougl Dale-Johnson for pointing this problem out.(mp 2.9.12)</procdesc><procdate>20100211</procdate></procstep><procstep><procdesc>Modified write_contact() in html.c to replace \"c/o\" with \"Attn:\"when there is a Contact_Person withinContact_Organization_Primary.  (mp 2.9.13)</procdesc><procdate>20100426</procdate></procstep><procstep><procdesc>Modified text.c and xml.c to disregard a UTF-8 byte order mark ifone is present at the beginning of the text or XML input file.(mp 2.9.13)</procdesc><procdate>20100819</procdate></procstep><procstep><procdesc>Modified element_start() in xml.c, adjusting the line number toaccount for the entity declarations we may have parsed indecode_xml() before we began parsing the user's actual XMLdocument.  Without this adjustment, line numbers are 66 more thanthey should be. Thanks to Stuart Giles (USGS) for pointing thisproblem out. (mp 2.9.14)</procdesc><procdate>20110923</procdate></procstep><procstep><procdesc>Modified dif.c to properly account for the possibility that, withan empty Fees element, the corresponding text pointer might beNULL; such is the case when the input file is XML.  This caused aseg fault in the online validator for some input files. (mp 2.9.15)</procdesc><procdate>20120404</procdate></procstep><procstep><procdesc>Significant changes to the error reporting system for mp,affecting numerous source files.  Now if the error file name endswith .xml, the errors will be written as XML, including, wherepossible, an xpath description of the location of the elementclosest to the problem.  In addition, within html.c, trailingspace is trimmed from name components that might be rearranged inorder to present the citation as a typical bibliographic referenceentry.  (mp 2.9.16)</procdesc><procdate>20121003</procdate></procstep><procstep><procdesc>Modified StartElement() in xml.c to correctly handle the case inwhich the first element encountered in the metadata record is anunrecognized extension.  (mp 2.9.17)</procdesc><procdate>20121031</procdate></procstep><procstep><procdesc>Modified check_Metadata() in syntax.c to generate a warning ifthere is no Data_Quality_Information,Spatial_Data_Organization_Information,Spatial_Reference_Information, Entity_and_Attribute_Information,or Distribution_Information.  (mp 2.9.18)</procdesc><procdate>20121108</procdate></procstep><procstep><procdesc>Modified allow() and check_extension() in syntax.c to include inthe variable message only the first 512 characters of the textualvalue on the given input line if that value would be longer than512 characters; this prevents a buffer overflow when reportingerrors.  (mp 2.9.19)</procdesc><procdate>20121207</procdate></procstep><procstep><procdesc>Added config option \"head\" within output:html; if specified, thecontents of that config file element will be included verbatim atthe end of the head element of the HTML output.  Could be used forany static &lt;meta&gt;, &lt;style&gt;, &lt;link&gt;, or &lt;script&gt; information.(mp 2.9.20)</procdesc><procdate>20121211</procdate></procstep><procstep><procdesc>Modified parse_text() in text.c so that, if character encoding hasnot been explicitly declared in a config file, the text is scannedfor conformance with UTF-8, and if the text conforms to UTF-8, theencoding is considered to be UTF-8 in further processing.  Thisallows people to process text files that are, in fact, UTF-8without having to use a config file to say so.  (mp 2.9.21)(xtme 2.7.20) (tkme 2.9.21) (mq 2.6.24)</procdesc><procdate>20130325</procdate></procstep><procstep><procdesc>Modified write_text() and write_text_item() in text.c so that theyno longer translate from UTF-8 to ISO-8859-1.  This change simplyreflects my increasing comfort with UTF-8.  (mp 2.9.22) (xtme 2.7.21)(tkme 2.9.22) (mq 2.6.25)</procdesc><procdate>20130618</procdate></procstep><procstep><procdesc>Modified keyword.h, keyword.c, and syntax.c to accommodate themetadata extensions for lidar data published in USGS TM11-B4.That document does not include long element names, so I made uplong element names to match the tags and definitions given inappendix 5 of the report.  (mp 2.9.23)</procdesc><procdate>20130701</procdate></procstep><procstep><procdesc>Modified element_start() and element_end() in xml.c toconsistently calculate the current line number in XML input files.Thanks to Aleta Vienneau for pointing out this problem.(mp 2.9.24)</procdesc><procdate>20130912</procdate></procstep><procstep><procdesc>Modified read_text() in text.c as well as utf8_of() in encoding.cand cns.c so that after the text is read, a test is carried out todetermine whether the text is likely UTF-16, and if so, the UTF-16is converted to UTF-8 for further processing.  The test in thiscase is to determine whether the text contains any zero bytes; ifit does, the text is assumed to be UTF-16.  This is because Ioccasionally see problems in which people using Microsoft Windowshave inadvertently converted their text files to UTF-16, which isreally a binary format for unicode characters.  This willcertainly scramble any input files that are binary but are notUTF-16, but those files aren't going to be readable metadataanyway.  (mp 2.9.25) (cns 2.8.5) (xtme 2.7.22) (tkme 2.9.28)(mq 2.6.26)</procdesc><procdate>20130924</procdate></procstep><procstep><procdesc>Modified translated() in html.c so that, in the FAQ format, URLsare not enclosed in angle brackets unless that is how they appearin the source metadata.  Thanks to Peg Shealy for pointing outthis now-obsolete feature.  (mp 2.9.26) Also make live links for https.</procdesc><procdate>20131202</procdate></procstep><procstep><procdesc>Modified write_xml_item() in xml.c to minimize the number ofnewlines printed when indentation of the XML output is requestedusing a config file.  Thanks to Drew Ignizio for suggesting thisrevision.  (mp 2.9.27) (xtme 2.7.23) (tkme 2.9.29) (mq 2.6.27)</procdesc><procdate>20140124</procdate></procstep><procstep><procdesc>Modified decode_text() in text.c to examine the text checkingcharacter encoding.  Generates a warning if the encoding was notspecified but the characters are not UTF-8, generates an error ifthe encoding was supposed to be UTF-8 and there are non-UTF-8characters. Modified write_contact() in html.c to remove a stray greater-than sign.(mp 2.9.28)</procdesc><procdate>20141204</procdate></procstep><procstep><procdesc>Modified check_scalar_children() in syntax.c to throw a bad-valueerror when Transfer_Size contains anything other than a singlefloating-point number.  I had been writing units into this value,like \"52 kilobytes\" in order to avoid specifying very smallfractional numbers of megabytes.  But the standard does say \"sizein megabytes\" and \"type: real\", so I'm going to have to lose thisargument. Also I cleaned up a few of the stray and unclosed &lt;p&gt; tags in theFAQ metadata format output using CSS. HTML output needs a thoroughrewrite, but that will take more time. (mp 2.9.29)</procdesc><procdate>20150309</procdate></procstep><procstep><procdesc>Modified check_date() in syntax.c to be more strict about datevalues.  Standard does specify that dates must be simple datevalues and cannot, for example, specify a range like 2001-2006.Previous versions of mp permitted this, but because somedownstream software throws an error on this type of value, we arebetter off discouraging loose date values. (mp 2.9.30)</procdesc><procdate>20150313</procdate></procstep></lineage></dataqual><distinfo><distrib><cntinfo><cntperp><cntper>Peter N. Schweitzer</cntper><cntorg>U.S. Geological Survey</cntorg></cntperp><cntaddr><addrtype>mailing address</addrtype><address>Mail Stop 954 National CenterU.S. Geological Survey12201 Sunrise Valley Drive</address><city>Reston</city><state>VA</state><postal>20192</postal><country>USA</country></cntaddr><cntvoice>(703) 648-6533</cntvoice><cntfax>(703) 648-6252</cntfax><cntemail>pschweitzer@usgs.gov</cntemail></cntinfo></distrib><distliab>Although this program has been used by the USGS, no warranty, expressed orimplied, is made by the USGS or the United States Government as to theaccuracy and functioning of the program and related program material nor shallthe fact of distribution constitute any such warranty, and no responsibilityis assumed by the USGS in connection therewith.</distliab><stdorder><digform><digtinfo><formname>Executable and source code</formname><filedec>unzip</filedec><transize>3 megabytes</transize></digtinfo><digtopt><onlinopt><computer><networka><networkr>&lt;http://geology.usgs.gov/tools/metadata/mp-2.9.*.zip</networkr></networka></computer></onlinopt></digtopt></digform><digform><digtinfo><formname>C</formname><formvern>ANSI (1987)</formvern><formcont>Source and executable code with documentation in HTML</formcont><filedec>gzip -d or tar xzvfo</filedec><transize>800 kilobytes</transize></digtinfo><digtopt><onlinopt><computer><networka><networkr>http://geology.usgs.gov/tools/metadata/src.tar.gz</networkr></networka></computer></onlinopt></digtopt></digform><fees>none</fees></stdorder></distinfo><metainfo><metd>20150313</metd><metc><cntinfo><cntperp><cntper>Peter N. Schweitzer</cntper></cntperp><cntaddr><addrtype>mailing address</addrtype><address>Mail Stop 954 National CenterU.S. Geological Survey12201 Sunrise Valley Drive</address><city>Reston</city><state>VA</state><postal>20192</postal><country>USA</country></cntaddr><cntvoice>(703) 648-6533</cntvoice><cntfax>(703) 648-6252</cntfax><cntemail>mailto:pschweitzer@usgs.gov</cntemail></cntinfo></metc><metstdn>Content Standard for Digital Geospatial Metadata</metstdn><metstdv>FGDC-STD-001-1998</metstdv></metainfo></metadata>", 
    "identity": {
        "subtype": "", 
        "is_error": false, 
        "version": "", 
        "protocol": "", 
        "language": "", 
        "service": "", 
        "has_dataset": false, 
        "has_metadata": false
    }, 
    "digest": "0b852123c0ffee0fabed87f5d8e0e922", 
    "source_url": "http://geology.usgs.gov/tools/metadata/tools/doc/metadata/mp.xml"
}